(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{104:function(n,e,t){(function(n){var r=void 0!==n&&n||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(n,e){this._id=n,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(n){n&&n.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(n,e){clearTimeout(n._idleTimeoutId),n._idleTimeout=e},e.unenroll=function(n){clearTimeout(n._idleTimeoutId),n._idleTimeout=-1},e._unrefActive=e.active=function(n){clearTimeout(n._idleTimeoutId);var e=n._idleTimeout;e>=0&&(n._idleTimeoutId=setTimeout((function(){n._onTimeout&&n._onTimeout()}),e))},t(341),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==n&&n.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==n&&n.clearImmediate||this&&this.clearImmediate}).call(this,t(20))},16:function(n,e){var t,r,i=n.exports={};function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function a(n){if(t===setTimeout)return setTimeout(n,0);if((t===o||!t)&&setTimeout)return t=setTimeout,setTimeout(n,0);try{return t(n,0)}catch(e){try{return t.call(null,n,0)}catch(e){return t.call(this,n,0)}}}!function(){try{t="function"==typeof setTimeout?setTimeout:o}catch(n){t=o}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(n){r=u}}();var s,c=[],f=!1,l=-1;function h(){f&&s&&(f=!1,s.length?c=s.concat(c):l=-1,c.length&&d())}function d(){if(!f){var n=a(h);f=!0;for(var e=c.length;e;){for(s=c,c=[];++l<e;)s&&s[l].run();l=-1,e=c.length}s=null,f=!1,function(n){if(r===clearTimeout)return clearTimeout(n);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(n);try{r(n)}catch(e){try{return r.call(null,n)}catch(e){return r.call(this,n)}}}(n)}}function p(n,e){this.fun=n,this.array=e}function v(){}i.nextTick=function(n){var e=new Array(arguments.length-1);if(arguments.length>1)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];c.push(new p(n,e)),1!==c.length||f||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(n){return[]},i.binding=function(n){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(n){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},20:function(n,e){var t;t=function(){return this}();try{t=t||new Function("return this")()}catch(n){"object"==typeof window&&(t=window)}n.exports=t},335:function(n,e,t){var r;!function(){"use strict";var i={not_string:/[^s]/,not_bool:/[^t]/,not_type:/[^T]/,not_primitive:/[^v]/,number:/[diefg]/,numeric_arg:/[bcdiefguxX]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijostTuvxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[+-]/};function o(n){return a(c(n),arguments)}function u(n,e){return o.apply(null,[n].concat(e||[]))}function a(n,e){var t,r,u,a,s,c,f,l,h,d=1,p=n.length,v="";for(r=0;r<p;r++)if("string"==typeof n[r])v+=n[r];else if("object"==typeof n[r]){if((a=n[r]).keys)for(t=e[d],u=0;u<a.keys.length;u++){if(null==t)throw new Error(o('[sprintf] Cannot access property "%s" of undefined value "%s"',a.keys[u],a.keys[u-1]));t=t[a.keys[u]]}else t=a.param_no?e[a.param_no]:e[d++];if(i.not_type.test(a.type)&&i.not_primitive.test(a.type)&&t instanceof Function&&(t=t()),i.numeric_arg.test(a.type)&&"number"!=typeof t&&isNaN(t))throw new TypeError(o("[sprintf] expecting number but found %T",t));switch(i.number.test(a.type)&&(l=t>=0),a.type){case"b":t=parseInt(t,10).toString(2);break;case"c":t=String.fromCharCode(parseInt(t,10));break;case"d":case"i":t=parseInt(t,10);break;case"j":t=JSON.stringify(t,null,a.width?parseInt(a.width):0);break;case"e":t=a.precision?parseFloat(t).toExponential(a.precision):parseFloat(t).toExponential();break;case"f":t=a.precision?parseFloat(t).toFixed(a.precision):parseFloat(t);break;case"g":t=a.precision?String(Number(t.toPrecision(a.precision))):parseFloat(t);break;case"o":t=(parseInt(t,10)>>>0).toString(8);break;case"s":t=String(t),t=a.precision?t.substring(0,a.precision):t;break;case"t":t=String(!!t),t=a.precision?t.substring(0,a.precision):t;break;case"T":t=Object.prototype.toString.call(t).slice(8,-1).toLowerCase(),t=a.precision?t.substring(0,a.precision):t;break;case"u":t=parseInt(t,10)>>>0;break;case"v":t=t.valueOf(),t=a.precision?t.substring(0,a.precision):t;break;case"x":t=(parseInt(t,10)>>>0).toString(16);break;case"X":t=(parseInt(t,10)>>>0).toString(16).toUpperCase()}i.json.test(a.type)?v+=t:(!i.number.test(a.type)||l&&!a.sign?h="":(h=l?"+":"-",t=t.toString().replace(i.sign,"")),c=a.pad_char?"0"===a.pad_char?"0":a.pad_char.charAt(1):" ",f=a.width-(h+t).length,s=a.width&&f>0?c.repeat(f):"",v+=a.align?h+t+s:"0"===c?h+s+t:s+h+t)}return v}var s=Object.create(null);function c(n){if(s[n])return s[n];for(var e,t=n,r=[],o=0;t;){if(null!==(e=i.text.exec(t)))r.push(e[0]);else if(null!==(e=i.modulo.exec(t)))r.push("%");else{if(null===(e=i.placeholder.exec(t)))throw new SyntaxError("[sprintf] unexpected placeholder");if(e[2]){o|=1;var u=[],a=e[2],c=[];if(null===(c=i.key.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(u.push(c[1]);""!==(a=a.substring(c[0].length));)if(null!==(c=i.key_access.exec(a)))u.push(c[1]);else{if(null===(c=i.index_access.exec(a)))throw new SyntaxError("[sprintf] failed to parse named argument key");u.push(c[1])}e[2]=u}else o|=2;if(3===o)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");r.push({placeholder:e[0],param_no:e[1],keys:e[2],sign:e[3],pad_char:e[4],align:e[5],width:e[6],precision:e[7],type:e[8]})}t=t.substring(e[0].length)}return s[n]=r}e.sprintf=o,e.vsprintf=u,"undefined"!=typeof window&&(window.sprintf=o,window.vsprintf=u,void 0===(r=function(){return{sprintf:o,vsprintf:u}}.call(e,t,e,n))||(n.exports=r))}()},336:function(n,e,t){"use strict";t.d(e,"b",(function(){return a})),t.d(e,"a",(function(){return c}));var r=t(337),i=function(){return Math.random().toString(36).substring(7).split("").join(".")},o={INIT:"@@redux/INIT"+i(),REPLACE:"@@redux/REPLACE"+i(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+i()}};function u(n){if("object"!=typeof n||null===n)return!1;for(var e=n;null!==Object.getPrototypeOf(e);)e=Object.getPrototypeOf(e);return Object.getPrototypeOf(n)===e}function a(n,e,t){var i;if("function"==typeof e&&"function"==typeof t||"function"==typeof t&&"function"==typeof arguments[3])throw new Error("It looks like you are passing several store enhancers to createStore(). This is not supported. Instead, compose them together to a single function");if("function"==typeof e&&void 0===t&&(t=e,e=void 0),void 0!==t){if("function"!=typeof t)throw new Error("Expected the enhancer to be a function.");return t(a)(n,e)}if("function"!=typeof n)throw new Error("Expected the reducer to be a function.");var s=n,c=e,f=[],l=f,h=!1;function d(){l===f&&(l=f.slice())}function p(){if(h)throw new Error("You may not call store.getState() while the reducer is executing. The reducer has already received the state as an argument. Pass it down from the top reducer instead of reading it from the store.");return c}function v(n){if("function"!=typeof n)throw new Error("Expected the listener to be a function.");if(h)throw new Error("You may not call store.subscribe() while the reducer is executing. If you would like to be notified after the store has been updated, subscribe from a component and invoke store.getState() in the callback to access the latest state. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");var e=!0;return d(),l.push(n),function(){if(e){if(h)throw new Error("You may not unsubscribe from a store listener while the reducer is executing. See https://redux.js.org/api-reference/store#subscribe(listener) for more details.");e=!1,d();var t=l.indexOf(n);l.splice(t,1)}}}function y(n){if(!u(n))throw new Error("Actions must be plain objects. Use custom middleware for async actions.");if(void 0===n.type)throw new Error('Actions may not have an undefined "type" property. Have you misspelled a constant?');if(h)throw new Error("Reducers may not dispatch actions.");try{h=!0,c=s(c,n)}finally{h=!1}for(var e=f=l,t=0;t<e.length;t++){(0,e[t])()}return n}function m(n){if("function"!=typeof n)throw new Error("Expected the nextReducer to be a function.");s=n,y({type:o.REPLACE})}function g(){var n,e=v;return(n={subscribe:function(n){if("object"!=typeof n||null===n)throw new TypeError("Expected the observer to be an object.");function t(){n.next&&n.next(p())}return t(),{unsubscribe:e(t)}}})[r.a]=function(){return this},n}return y({type:o.INIT}),(i={dispatch:y,subscribe:v,getState:p,replaceReducer:m})[r.a]=g,i}function s(n,e){var t=e&&e.type;return"Given "+(t&&'action "'+String(t)+'"'||"an action")+', reducer "'+n+'" returned undefined. To ignore an action, you must explicitly return the previous state. If you want this reducer to hold no value, you can return null instead of undefined.'}function c(n){for(var e=Object.keys(n),t={},r=0;r<e.length;r++){var i=e[r];0,"function"==typeof n[i]&&(t[i]=n[i])}var u,a=Object.keys(t);try{!function(n){Object.keys(n).forEach((function(e){var t=n[e];if(void 0===t(void 0,{type:o.INIT}))throw new Error('Reducer "'+e+"\" returned undefined during initialization. If the state passed to the reducer is undefined, you must explicitly return the initial state. The initial state may not be undefined. If you don't want to set a value for this reducer, you can use null instead of undefined.");if(void 0===t(void 0,{type:o.PROBE_UNKNOWN_ACTION()}))throw new Error('Reducer "'+e+"\" returned undefined when probed with a random type. Don't try to handle "+o.INIT+' or other actions in "redux/*" namespace. They are considered private. Instead, you must return the current state for any unknown actions, unless it is undefined, in which case you must return the initial state, regardless of the action type. The initial state may not be undefined, but can be null.')}))}(t)}catch(n){u=n}return function(n,e){if(void 0===n&&(n={}),u)throw u;for(var r=!1,i={},o=0;o<a.length;o++){var c=a[o],f=t[c],l=n[c],h=f(l,e);if(void 0===h){var d=s(c,e);throw new Error(d)}i[c]=h,r=r||h!==l}return r?i:n}}},337:function(n,e,t){"use strict";(function(n,r){var i,o=t(339);i="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==n?n:r;var u=Object(o.a)(i);e.a=u}).call(this,t(20),t(338)(n))},338:function(n,e){n.exports=function(n){if(!n.webpackPolyfill){var e=Object.create(n);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},339:function(n,e,t){"use strict";function r(n){var e,t=n.Symbol;return"function"==typeof t?t.observable?e=t.observable:(e=t("observable"),t.observable=e):e="@@observable",e}t.d(e,"a",(function(){return r}))},340:function(n,e,t){"use strict";(function(n,t){var r=Object.keys,i=Array.isArray,o="undefined"!=typeof self?self:"undefined"!=typeof window?window:n;function u(n,e){return"object"!=typeof e||r(e).forEach((function(t){n[t]=e[t]})),n}var a=Object.getPrototypeOf,s={}.hasOwnProperty;function c(n,e){return s.call(n,e)}function f(n,e){"function"==typeof e&&(e=e(a(n))),r(e).forEach((function(t){h(n,t,e[t])}))}var l=Object.defineProperty;function h(n,e,t,r){l(n,e,u(t&&c(t,"get")&&"function"==typeof t.get?{get:t.get,set:t.set,configurable:!0}:{value:t,configurable:!0,writable:!0},r))}function d(n){return{from:function(e){return n.prototype=Object.create(e.prototype),h(n.prototype,"constructor",n),{extend:f.bind(null,n.prototype)}}}}var p=Object.getOwnPropertyDescriptor;var v=[].slice;function y(n,e,t){return v.call(n,e,t)}function m(n,e){return e(n)}function g(n){if(!n)throw new Error("Assertion Failed")}function b(n){o.setImmediate?t(n):setTimeout(n,0)}function w(n,e){return n.reduce((function(n,t,r){var i=e(t,r);return i&&(n[i[0]]=i[1]),n}),{})}function _(n,e){return function(){try{n.apply(this,arguments)}catch(n){e(n)}}}function k(n,e,t){try{n.apply(null,t)}catch(n){e&&e(n)}}function x(n,e){if(c(n,e))return n[e];if(!e)return n;if("string"!=typeof e){for(var t=[],r=0,i=e.length;r<i;++r){var o=x(n,e[r]);t.push(o)}return t}var u=e.indexOf(".");if(-1!==u){var a=n[e.substr(0,u)];return void 0===a?void 0:x(a,e.substr(u+1))}}function E(n,e,t){if(n&&void 0!==e&&(!("isFrozen"in Object)||!Object.isFrozen(n)))if("string"!=typeof e&&"length"in e){g("string"!=typeof t&&"length"in t);for(var r=0,i=e.length;r<i;++r)E(n,e[r],t[r])}else{var o=e.indexOf(".");if(-1!==o){var u=e.substr(0,o),a=e.substr(o+1);if(""===a)void 0===t?delete n[u]:n[u]=t;else{var s=n[u];s||(s=n[u]={}),E(s,a,t)}}else void 0===t?delete n[e]:n[e]=t}}function j(n){var e={};for(var t in n)c(n,t)&&(e[t]=n[t]);return e}var I=[].concat;function O(n){return I.apply([],n)}var T="Boolean,String,Date,RegExp,Blob,File,FileList,ArrayBuffer,DataView,Uint8ClampedArray,ImageData,Map,Set".split(",").concat(O([8,16,32,64].map((function(n){return["Int","Uint","Float"].map((function(e){return e+n+"Array"}))})))).filter((function(n){return o[n]})).map((function(n){return o[n]}));function P(n){if(!n||"object"!=typeof n)return n;var e;if(i(n)){e=[];for(var t=0,r=n.length;t<r;++t)e.push(P(n[t]))}else if(T.indexOf(n.constructor)>=0)e=n;else for(var o in e=n.constructor?Object.create(n.constructor.prototype):{},n)c(n,o)&&(e[o]=P(n[o]));return e}function S(n,e,t,i){return t=t||{},i=i||"",r(n).forEach((function(r){if(c(e,r)){var o=n[r],u=e[r];"object"==typeof o&&"object"==typeof u&&o&&u&&""+o.constructor==""+u.constructor?S(o,u,t,i+r+"."):o!==u&&(t[i+r]=e[r])}else t[i+r]=void 0})),r(e).forEach((function(r){c(n,r)||(t[i+r]=e[r])})),t}var A="undefined"!=typeof Symbol&&Symbol.iterator,C=A?function(n){var e;return null!=n&&(e=n[A])&&e.apply(n)}:function(){return null},D={};function K(n){var e,t,r,o;if(1===arguments.length){if(i(n))return n.slice();if(this===D&&"string"==typeof n)return[n];if(o=C(n)){for(t=[];!(r=o.next()).done;)t.push(r.value);return t}if(null==n)return[n];if("number"==typeof(e=n.length)){for(t=new Array(e);e--;)t[e]=n[e];return t}return[n]}for(e=arguments.length,t=new Array(e);e--;)t[e]=arguments[e];return t}var F="undefined"!=typeof location&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function N(n,e){F=n,B=e}var B=function(){return!0},M=!new Error("").stack;function R(){if(M)try{throw R.arguments,new Error}catch(n){return n}return new Error}function q(n,e){var t=n.stack;return t?(e=e||0,0===t.indexOf(n.name)&&(e+=(n.name+n.message).split("\n").length),t.split("\n").slice(e).filter(B).map((function(n){return"\n"+n})).join("")):""}var U=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],L=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(U),z={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed"};function V(n,e){this._e=R(),this.name=n,this.message=e}function W(n,e,t,r){this._e=R(),this.failures=e,this.failedKeys=r,this.successCount=t}function H(n,e){this._e=R(),this.name="BulkError",this.failures=e,this.message=function(n,e){return n+". Errors: "+e.map((function(n){return n.toString()})).filter((function(n,e,t){return t.indexOf(n)===e})).join("\n")}(n,e)}d(V).from(Error).extend({stack:{get:function(){return this._stack||(this._stack=this.name+": "+this.message+q(this._e,2))}},toString:function(){return this.name+": "+this.message}}),d(W).from(V),d(H).from(V);var Q=L.reduce((function(n,e){return n[e]=e+"Error",n}),{}),$=V,G=L.reduce((function(n,e){var t=e+"Error";function r(n,r){this._e=R(),this.name=t,n?"string"==typeof n?(this.message=n,this.inner=r||null):"object"==typeof n&&(this.message=n.name+" "+n.message,this.inner=n):(this.message=z[e]||t,this.inner=null)}return d(r).from($),n[e]=r,n}),{});G.Syntax=SyntaxError,G.Type=TypeError,G.Range=RangeError;var J=U.reduce((function(n,e){return n[e+"Error"]=G[e],n}),{});var Y=L.reduce((function(n,e){return-1===["Syntax","Type","Range"].indexOf(e)&&(n[e+"Error"]=G[e]),n}),{});function X(){}function Z(n){return n}function nn(n,e){return null==n||n===Z?e:function(t){return e(n(t))}}function en(n,e){return function(){n.apply(this,arguments),e.apply(this,arguments)}}function tn(n,e){return n===X?e:function(){var t=n.apply(this,arguments);void 0!==t&&(arguments[0]=t);var r=this.onsuccess,i=this.onerror;this.onsuccess=null,this.onerror=null;var o=e.apply(this,arguments);return r&&(this.onsuccess=this.onsuccess?en(r,this.onsuccess):r),i&&(this.onerror=this.onerror?en(i,this.onerror):i),void 0!==o?o:t}}function rn(n,e){return n===X?e:function(){n.apply(this,arguments);var t=this.onsuccess,r=this.onerror;this.onsuccess=this.onerror=null,e.apply(this,arguments),t&&(this.onsuccess=this.onsuccess?en(t,this.onsuccess):t),r&&(this.onerror=this.onerror?en(r,this.onerror):r)}}function on(n,e){return n===X?e:function(t){var r=n.apply(this,arguments);u(t,r);var i=this.onsuccess,o=this.onerror;this.onsuccess=null,this.onerror=null;var a=e.apply(this,arguments);return i&&(this.onsuccess=this.onsuccess?en(i,this.onsuccess):i),o&&(this.onerror=this.onerror?en(o,this.onerror):o),void 0===r?void 0===a?void 0:a:u(r,a)}}function un(n,e){return n===X?e:function(){return!1!==e.apply(this,arguments)&&n.apply(this,arguments)}}function an(n,e){return n===X?e:function(){var t=n.apply(this,arguments);if(t&&"function"==typeof t.then){for(var r=this,i=arguments.length,o=new Array(i);i--;)o[i]=arguments[i];return t.then((function(){return e.apply(r,o)}))}return e.apply(this,arguments)}}Y.ModifyError=W,Y.DexieError=V,Y.BulkError=H;var sn={},cn=function(){try{return new Function("let F=async ()=>{},p=F();return [p,Object.getPrototypeOf(p),Promise.resolve(),F.constructor];")()}catch(e){var n=o.Promise;return n?[n.resolve(),n.prototype,n.resolve()]:[]}}(),fn=cn[0],ln=cn[1],hn=cn[2],dn=ln&&ln.then,pn=fn&&fn.constructor,vn=cn[3],yn=!!hn,mn=!1,gn=hn?function(){hn.then(qn)}:o.setImmediate?t.bind(null,qn):o.MutationObserver?function(){var n=document.createElement("div");new MutationObserver((function(){qn(),n=null})).observe(n,{attributes:!0}),n.setAttribute("i","1")}:function(){setTimeout(qn,0)},bn=function(n,e){Tn.push([n,e]),_n&&(gn(),_n=!1)},wn=!0,_n=!0,kn=[],xn=[],En=null,jn=Z,In={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:ce,pgp:!1,env:{},finalize:function(){this.unhandleds.forEach((function(n){try{ce(n[0],n[1])}catch(n){}}))}},On=In,Tn=[],Pn=0,Sn=[];function An(n){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");this._listeners=[],this.onuncatched=X,this._lib=!1;var e=this._PSD=On;if(F&&(this._stackHolder=R(),this._prev=null,this._numPrev=0),"function"!=typeof n){if(n!==sn)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(!1===this._state&&Fn(this,this._value))}this._state=null,this._value=null,++e.ref,Kn(this,n)}var Cn={get:function(){var n=On,e=Jn;function t(t,r){var i=this,o=!n.global&&(n!==On||e!==Jn);o&&ne();var u=new An((function(e,u){Bn(i,new Dn(ae(t,n,o),ae(r,n,o),e,u,n))}));return F&&Rn(u,this),u}return t.prototype=sn,t},set:function(n){h(this,"then",n&&n.prototype===sn?Cn:{get:function(){return n},set:Cn.set})}};function Dn(n,e,t,r,i){this.onFulfilled="function"==typeof n?n:null,this.onRejected="function"==typeof e?e:null,this.resolve=t,this.reject=r,this.psd=i}function Kn(n,e){try{e((function(e){if(null===n._state){if(e===n)throw new TypeError("A promise cannot be resolved with itself.");var t=n._lib&&Un();e&&"function"==typeof e.then?Kn(n,(function(n,t){e instanceof An?e._then(n,t):e.then(n,t)})):(n._state=!0,n._value=e,Nn(n)),t&&Ln()}}),Fn.bind(null,n))}catch(e){Fn(n,e)}}function Fn(n,e){if(xn.push(e),null===n._state){var t=n._lib&&Un();e=jn(e),n._state=!1,n._value=e,F&&null!==e&&"object"==typeof e&&!e._promise&&k((function(){var t=function n(e,t){var r;return p(e,t)||(r=a(e))&&n(r,t)}(e,"stack");e._promise=n,h(e,"stack",{get:function(){return mn?t&&(t.get?t.get.apply(e):t.value):n.stack}})})),function(n){kn.some((function(e){return e._value===n._value}))||kn.push(n)}(n),Nn(n),t&&Ln()}}function Nn(n){var e=n._listeners;n._listeners=[];for(var t=0,r=e.length;t<r;++t)Bn(n,e[t]);var i=n._PSD;--i.ref||i.finalize(),0===Pn&&(++Pn,bn((function(){0==--Pn&&zn()}),[]))}function Bn(n,e){if(null!==n._state){var t=n._state?e.onFulfilled:e.onRejected;if(null===t)return(n._state?e.resolve:e.reject)(n._value);++e.psd.ref,++Pn,bn(Mn,[t,n,e])}else n._listeners.push(e)}function Mn(n,e,t){try{En=e;var r,i=e._value;e._state?r=n(i):(xn.length&&(xn=[]),r=n(i),-1===xn.indexOf(i)&&function(n){var e=kn.length;for(;e;)if(kn[--e]._value===n._value)return void kn.splice(e,1)}(e)),t.resolve(r)}catch(n){t.reject(n)}finally{En=null,0==--Pn&&zn(),--t.psd.ref||t.psd.finalize()}}function Rn(n,e){var t=e?e._numPrev+1:0;t<100&&(n._prev=e,n._numPrev=t)}function qn(){Un()&&Ln()}function Un(){var n=wn;return wn=!1,_n=!1,n}function Ln(){var n,e,t;do{for(;Tn.length>0;)for(n=Tn,Tn=[],t=n.length,e=0;e<t;++e){var r=n[e];r[0].apply(null,r[1])}}while(Tn.length>0);wn=!0,_n=!0}function zn(){var n=kn;kn=[],n.forEach((function(n){n._PSD.onunhandled.call(null,n._value,n)}));for(var e=Sn.slice(0),t=e.length;t;)e[--t]()}function Vn(n){return new An(sn,!1,n)}function Wn(n,e){var t=On;return function(){var r=Un(),i=On;try{return ie(t,!0),n.apply(this,arguments)}catch(n){e&&e(n)}finally{ie(i,!1),r&&Ln()}}}f(An.prototype,{then:Cn,_then:function(n,e){Bn(this,new Dn(null,null,n,e,On))},catch:function(n){if(1===arguments.length)return this.then(null,n);var e=arguments[0],t=arguments[1];return"function"==typeof e?this.then(null,(function(n){return n instanceof e?t(n):Vn(n)})):this.then(null,(function(n){return n&&n.name===e?t(n):Vn(n)}))},finally:function(n){return this.then((function(e){return n(),e}),(function(e){return n(),Vn(e)}))},stack:{get:function(){if(this._stack)return this._stack;try{mn=!0;var n=function n(e,t,r){if(t.length===r)return t;var i="";if(!1===e._state){var o,u,a=e._value;null!=a?(o=a.name||"Error",u=a.message||a,i=q(a,0)):(o=a,u=""),t.push(o+(u?": "+u:"")+i)}F&&((i=q(e._stackHolder,2))&&-1===t.indexOf(i)&&t.push(i),e._prev&&n(e._prev,t,r));return t}(this,[],20).join("\nFrom previous: ");return null!==this._state&&(this._stack=n),n}finally{mn=!1}}},timeout:function(n,e){var t=this;return n<1/0?new An((function(r,i){var o=setTimeout((function(){return i(new G.Timeout(e))}),n);t.then(r,i).finally(clearTimeout.bind(null,o))})):this}}),"undefined"!=typeof Symbol&&Symbol.toStringTag&&h(An.prototype,Symbol.toStringTag,"Promise"),In.env=oe(),f(An,{all:function(){var n=K.apply(null,arguments).map(ee);return new An((function(e,t){0===n.length&&e([]);var r=n.length;n.forEach((function(i,o){return An.resolve(i).then((function(t){n[o]=t,--r||e(n)}),t)}))}))},resolve:function(n){if(n instanceof An)return n;if(n&&"function"==typeof n.then)return new An((function(e,t){n.then(e,t)}));var e=new An(sn,!0,n);return Rn(e,En),e},reject:Vn,race:function(){var n=K.apply(null,arguments).map(ee);return new An((function(e,t){n.map((function(n){return An.resolve(n).then(e,t)}))}))},PSD:{get:function(){return On},set:function(n){return On=n}},newPSD:Xn,usePSD:ue,scheduler:{get:function(){return bn},set:function(n){bn=n}},rejectionMapper:{get:function(){return jn},set:function(n){jn=n}},follow:function(n,e){return new An((function(t,r){return Xn((function(e,t){var r=On;r.unhandleds=[],r.onunhandled=t,r.finalize=en((function(){var n=this;!function(n){Sn.push((function e(){n(),Sn.splice(Sn.indexOf(e),1)})),++Pn,bn((function(){0==--Pn&&zn()}),[])}((function(){0===n.unhandleds.length?e():t(n.unhandleds[0])}))}),r.finalize),n()}),e,t,r)}))}});var Hn={awaits:0,echoes:0,id:0},Qn=0,$n=[],Gn=0,Jn=0,Yn=0;function Xn(n,e,t,r){var i=On,o=Object.create(i);o.parent=i,o.ref=0,o.global=!1,o.id=++Yn;var a=In.env;o.env=yn?{Promise:An,PromiseProp:{value:An,configurable:!0,writable:!0},all:An.all,race:An.race,resolve:An.resolve,reject:An.reject,nthen:se(a.nthen,o),gthen:se(a.gthen,o)}:{},e&&u(o,e),++i.ref,o.finalize=function(){--this.parent.ref||this.parent.finalize()};var s=ue(o,n,t,r);return 0===o.ref&&o.finalize(),s}function Zn(){return Hn.id||(Hn.id=++Qn),++Hn.awaits,Hn.echoes+=7,Hn.id}function ne(n){!Hn.awaits||n&&n!==Hn.id||(0==--Hn.awaits&&(Hn.id=0),Hn.echoes=7*Hn.awaits)}function ee(n){return Hn.echoes&&n&&n.constructor===pn?(Zn(),n.then((function(n){return ne(),n}),(function(n){return ne(),fe(n)}))):n}function te(n){++Jn,Hn.echoes&&0!=--Hn.echoes||(Hn.echoes=Hn.id=0),$n.push(On),ie(n,!0)}function re(){var n=$n[$n.length-1];$n.pop(),ie(n,!1)}function ie(n,e){var t,r=On;if((e?!Hn.echoes||Gn++&&n===On:!Gn||--Gn&&n===On)||(t=e?te.bind(null,n):re,dn.call(fn,t)),n!==On&&(On=n,r===In&&(In.env=oe()),yn)){var i=In.env.Promise,u=n.env;ln.then=u.nthen,i.prototype.then=u.gthen,(r.global||n.global)&&(Object.defineProperty(o,"Promise",u.PromiseProp),i.all=u.all,i.race=u.race,i.resolve=u.resolve,i.reject=u.reject)}}function oe(){var n=o.Promise;return yn?{Promise:n,PromiseProp:Object.getOwnPropertyDescriptor(o,"Promise"),all:n.all,race:n.race,resolve:n.resolve,reject:n.reject,nthen:ln.then,gthen:n.prototype.then}:{}}function ue(n,e,t,r,i){var o=On;try{return ie(n,!0),e(t,r,i)}finally{ie(o,!1)}}function ae(n,e,t){return"function"!=typeof n?n:function(){var r=On;t&&Zn(),ie(e,!0);try{return n.apply(this,arguments)}finally{ie(r,!1)}}}function se(n,e){return function(t,r){return n.call(this,ae(t,e,!1),ae(r,e,!1))}}function ce(n,e){var t;try{t=e.onuncatched(n)}catch(n){}if(!1!==t)try{var r,i={promise:e,reason:n};if(o.document&&document.createEvent?((r=document.createEvent("Event")).initEvent("unhandledrejection",!0,!0),u(r,i)):o.CustomEvent&&u(r=new CustomEvent("unhandledrejection",{detail:i}),i),r&&o.dispatchEvent&&(dispatchEvent(r),!o.PromiseRejectionEvent&&o.onunhandledrejection))try{o.onunhandledrejection(r)}catch(n){}r.defaultPrevented||console.warn("Unhandled rejection: "+(n.stack||n))}catch(n){}}var fe=An.reject;function le(n){var e={},t=function(t,r){if(r){for(var i=arguments.length,o=new Array(i-1);--i;)o[i-1]=arguments[i];return e[t].subscribe.apply(null,o),n}if("string"==typeof t)return e[t]};t.addEventType=a;for(var o=1,u=arguments.length;o<u;++o)a(arguments[o]);return t;function a(n,r,i){if("object"==typeof n)return s(n);r||(r=un),i||(i=X);var o={subscribers:[],fire:i,subscribe:function(n){-1===o.subscribers.indexOf(n)&&(o.subscribers.push(n),o.fire=r(o.fire,n))},unsubscribe:function(n){o.subscribers=o.subscribers.filter((function(e){return e!==n})),o.fire=o.subscribers.reduce(r,i)}};return e[n]=t[n]=o,o}function s(n){r(n).forEach((function(e){var t=n[e];if(i(t))a(e,n[e][0],n[e][1]);else{if("asap"!==t)throw new G.InvalidArgument("Invalid event config");var r=a(e,Z,(function(){for(var n=arguments.length,e=new Array(n);n--;)e[n]=arguments[n];r.subscribers.forEach((function(n){b((function(){n.apply(null,e)}))}))}))}}))}}var he,de=String.fromCharCode(65535),pe=function(){try{return IDBKeyRange.only([[]]),[[]]}catch(n){return de}}(),ve="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ye=[],me="undefined"!=typeof navigator&&/(MSIE|Trident|Edge)/.test(navigator.userAgent),ge=me,be=me,we=function(n){return!/(dexie\.js|dexie\.min\.js)/.test(n)};function _e(n,e){var t,a,s,l,d,p=_e.dependencies,v=u({addons:_e.addons,autoOpen:!0,indexedDB:p.indexedDB,IDBKeyRange:p.IDBKeyRange},e),b=v.addons,I=v.autoOpen,T=v.indexedDB,A=v.IDBKeyRange,C=this._dbSchema={},N=[],B=[],M={},U=null,L=null,z=!1,V=null,Q=!1,$="readwrite",J=this,Y=new An((function(n){t=n})),en=new An((function(n,e){a=e})),un=!0,sn=!!Ce(T);function cn(n){this._cfg={version:n,storesSource:null,dbschema:{},tables:{},contentUpgrade:null},this.stores({})}function fn(n,e,t){var i=J._createTransaction($,B,C);i.create(e),i._completion.catch(t);var o=i._reject.bind(i);Xn((function(){On.trans=i,0===n?(r(C).forEach((function(n){ln(e,n,C[n].primKey,C[n].indexes)})),An.follow((function(){return J.on.populate.fire(i)})).catch(o)):function(n,e,t){var i=[],o=N.filter((function(e){return e._cfg.version===n}))[0];if(!o)throw new G.Upgrade("Dexie specification of currently installed DB version is missing");C=J._dbSchema=o._cfg.dbschema;var u=!1;function a(){return i.length?An.resolve(i.shift()(e.idbtrans)).then(a):An.resolve()}return N.filter((function(e){return e._cfg.version>n})).forEach((function(n){i.push((function(){var r=C,i=n._cfg.dbschema;Fn(r,t),Fn(i,t),C=J._dbSchema=i;var o=function(n,e){var t={del:[],add:[],change:[]};for(var r in n)e[r]||t.del.push(r);for(r in e){var i=n[r],o=e[r];if(i){var u={name:r,def:o,recreate:!1,del:[],add:[],change:[]};if(i.primKey.src!==o.primKey.src)u.recreate=!0,t.change.push(u);else{var a=i.idxByName,s=o.idxByName;for(var c in a)s[c]||u.del.push(c);for(c in s){var f=a[c],l=s[c];f?f.src!==l.src&&u.change.push(l):u.add.push(l)}(u.del.length>0||u.add.length>0||u.change.length>0)&&t.change.push(u)}}else t.add.push([r,o])}return t}(r,i);if(o.add.forEach((function(n){ln(t,n[0],n[1].primKey,n[1].indexes)})),o.change.forEach((function(n){if(n.recreate)throw new G.Upgrade("Not yet support for changing primary key");var e=t.objectStore(n.name);n.add.forEach((function(n){hn(e,n)})),n.change.forEach((function(n){e.deleteIndex(n.name),hn(e,n)})),n.del.forEach((function(n){e.deleteIndex(n)}))})),n._cfg.contentUpgrade)return u=!0,An.follow((function(){n._cfg.contentUpgrade(e)}))})),i.push((function(e){u&&ge||function(n,e){for(var t=0;t<e.db.objectStoreNames.length;++t){var r=e.db.objectStoreNames[t];null==n[r]&&e.db.deleteObjectStore(r)}}(n._cfg.dbschema,e)}))})),a().then((function(){!function(n,e){r(n).forEach((function(t){e.db.objectStoreNames.contains(t)||ln(e,t,n[t].primKey,n[t].indexes)}))}(C,t)}))}(n,i,e).catch(o)}))}function ln(n,e,t,r){var i=n.db.createObjectStore(e,t.keyPath?{keyPath:t.keyPath,autoIncrement:t.auto}:{autoIncrement:t.auto});return r.forEach((function(n){hn(i,n)})),i}function hn(n,e){n.createIndex(e.name,e.keyPath,{unique:e.unique,multiEntry:e.multi})}function dn(n,e,t){var r=arguments.length;if(r<2)throw new G.InvalidArgument("Too few arguments");for(var i=new Array(r-1);--r;)i[r-1]=arguments[r];t=i.pop();var o=O(i);return[n,o,t]}function yn(n,e,t){this.name=n,this.schema=e,this._tx=t,this.hook=M[n]?M[n].hook:le(null,{creating:[tn,X],reading:[nn,Z],updating:[on,X],deleting:[rn,X]})}function mn(n,e,t){return(t?Ie:Ee)((function(t){n.push(t),e&&e()}))}function gn(n,e,t,r,i){return new An((function(o,u){var a=t.length,s=a-1;if(0===a)return o();if(r){var c,f=Ie(u),l=xe(null);k((function(){for(var r=0;r<a;++r){c={onsuccess:null,onerror:null};var u=t[r];i.call(c,u[0],u[1],e);var h=n.delete(u[0]);h._hookCtx=c,h.onerror=f,h.onsuccess=r===s?xe(o):l}}),(function(n){throw c.onerror&&c.onerror(n),n}))}else for(var h=0;h<a;++h){var d=n.delete(t[h]);d.onerror=Ee(u),h===s&&(d.onsuccess=Wn((function(){return o()})))}}))}function bn(n,e,t,r){var i=this;this.db=J,this.mode=n,this.storeNames=e,this.idbtrans=null,this.on=le(this,"complete","error","abort"),this.parent=r||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new An((function(n,e){i._resolve=n,i._reject=e})),this._completion.then((function(){i.active=!1,i.on.complete.fire()}),(function(n){var e=i.active;return i.active=!1,i.on.error.fire(n),i.parent?i.parent._reject(n):e&&i.idbtrans&&i.idbtrans.abort(),fe(n)}))}function wn(n,e,t){this._ctx={table:n,index:":id"===e?null:e,or:t}}function _n(n,e){var t=null,r=null;if(e)try{t=e()}catch(n){r=n}var i=n._ctx,o=i.table;this._ctx={table:o,index:i.index,isPrimKey:!i.index||o.schema.primKey.keyPath&&i.index===o.schema.primKey.name,range:t,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:r,or:i.or,valueMapper:o.hook.reading.fire}}function kn(n,e){return!(n.filter||n.algorithm||n.or)&&(e?n.justLimit:!n.replayFilter)}function xn(n,e){return n._cfg.version-e._cfg.version}function En(n,e,t){e.forEach((function(e){var r=t[e];n.forEach((function(n){e in n||(n===bn.prototype||n instanceof bn?h(n,e,{get:function(){return this.table(e)}}):n[e]=new yn(e,r))}))}))}function jn(n,e,t,r,i,o){var u=Wn(o?function(n,e,r){return t(o(n),e,r)}:t,i);n.onerror||(n.onerror=Ee(i)),n.onsuccess=_(e?function(){var t=n.result;if(t){var o=function(){t.continue()};e(t,(function(n){o=n}),r,i)&&u(t.value,t,(function(n){o=n})),o()}else r()}:function(){var e=n.result;if(e){var t=function(){e.continue()};u(e.value,e,(function(n){t=n})),t()}else r()},i)}function In(n,e){return T.cmp(n,e)}function Tn(n,e){return In(n,e)>0?n:e}function Pn(n,e){return T.cmp(n,e)}function Sn(n,e){return T.cmp(e,n)}function Cn(n,e){return n<e?-1:n===e?0:1}function Dn(n,e){return n>e?-1:n===e?0:1}function Kn(n,e){return n?e?function(){return n.apply(this,arguments)&&e.apply(this,arguments)}:n:e}function Fn(n,e){for(var t=e.db.objectStoreNames,r=0;r<t.length;++r){var i=t[r],u=e.objectStore(i);s="getAll"in u;for(var a=0;a<u.indexNames.length;++a){var c=u.indexNames[a],f=u.index(c).keyPath,l="string"==typeof f?f:"["+y(f).join("+")+"]";if(n[i]){var h=n[i].idxByName[l];h&&(h.name=c)}}}/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&o.WorkerGlobalScope&&o instanceof o.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(s=!1)}function Nn(n){J.on("blocked").fire(n),ye.filter((function(n){return n.name===J.name&&n!==J&&!n._vcFired})).map((function(e){return e.on("versionchange").fire(n)}))}this.version=function(n){if(U||z)throw new G.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,n);var e=N.filter((function(e){return e._cfg.version===n}))[0];return e||(e=new cn(n),N.push(e),N.sort(xn),un=!1,e)},u(cn.prototype,{stores:function(n){this._cfg.storesSource=this._cfg.storesSource?u(this._cfg.storesSource,n):n;var e={};N.forEach((function(n){u(e,n._cfg.storesSource)}));var t=this._cfg.dbschema={};return this._parseStoresSpec(e,t),C=J._dbSchema=t,[M,J,bn.prototype].forEach((function(n){for(var e in n)n[e]instanceof yn&&delete n[e]})),En([M,J,bn.prototype,this._cfg.tables],r(t),t),B=r(t),this},upgrade:function(n){return this._cfg.contentUpgrade=n,this},_parseStoresSpec:function(n,e){r(n).forEach((function(t){if(null!==n[t]){var r={},o=function(n){var e=[];return n.split(",").forEach((function(n){var t=(n=n.trim()).replace(/([&*]|\+\+)/g,""),r=/^\[/.test(t)?t.match(/^\[(.*)\]$/)[1].split("+"):t;e.push(new Pe(t,r||null,/\&/.test(n),/\*/.test(n),/\+\+/.test(n),i(r),/\./.test(n)))})),e}(n[t]),u=o.shift();if(u.multi)throw new G.Schema("Primary key cannot be multi-valued");u.keyPath&&E(r,u.keyPath,u.auto?0:u.keyPath),o.forEach((function(n){if(n.auto)throw new G.Schema("Only primary key can be marked as autoIncrement (++)");if(!n.keyPath)throw new G.Schema("Index must have a name and cannot be an empty string");E(r,n.keyPath,n.compound?n.keyPath.map((function(){return""})):"")})),e[t]=new Se(t,u,o,r)}}))}}),this._allTables=M,this._createTransaction=function(n,e,t,r){return new bn(n,e,t,r)},this._whenReady=function(n){return Q||On.letThrough?n():new An((function(n,e){if(!z){if(!I)return void e(new G.DatabaseClosed);J.open().catch(X)}Y.then(n,e)})).then(n)},this.verno=0,this.open=function(){if(z||U)return Y.then((function(){return L?fe(L):J}));F&&(en._stackHolder=R()),z=!0,L=null,Q=!1;var e=t,i=null;return An.race([en,new An((function(e,t){if(!T)throw new G.MissingAPI("indexedDB API not found. If using IE10+, make sure to run your code on a server URL (not locally). If using old Safari versions, make sure to include indexedDB polyfill.");var o=un?T.open(n):T.open(n,Math.round(10*J.verno));if(!o)throw new G.MissingAPI("IndexedDB API not available");o.onerror=Ee(t),o.onblocked=Wn(Nn),o.onupgradeneeded=Wn((function(e){if(i=o.transaction,un&&!J._allowEmptyDB){o.onerror=Oe,i.abort(),o.result.close();var r=T.deleteDatabase(n);r.onsuccess=r.onerror=Wn((function(){t(new G.NoSuchDatabase("Database "+n+" doesnt exist"))}))}else{i.onerror=Ee(t),fn((e.oldVersion>Math.pow(2,62)?0:e.oldVersion)/10,i,t)}}),t),o.onsuccess=Wn((function(){if(i=null,U=o.result,ye.push(J),un)!function(){if(J.verno=U.version/10,J._dbSchema=C={},0===(B=y(U.objectStoreNames,0)).length)return;var n=U.transaction(Ae(B),"readonly");B.forEach((function(e){for(var t=n.objectStore(e),r=t.keyPath,i=r&&"string"==typeof r&&-1!==r.indexOf("."),o=new Pe(r,r||"",!1,!1,!!t.autoIncrement,r&&"string"!=typeof r,i),u=[],a=0;a<t.indexNames.length;++a){var s=t.index(t.indexNames[a]);i=(r=s.keyPath)&&"string"==typeof r&&-1!==r.indexOf(".");var c=new Pe(s.name,r,!!s.unique,!!s.multiEntry,!1,r&&"string"!=typeof r,i);u.push(c)}C[e]=new Se(e,o,u,{})})),En([M],r(C),C)}();else if(U.objectStoreNames.length>0)try{Fn(C,U.transaction(Ae(U.objectStoreNames),"readonly"))}catch(n){}U.onversionchange=Wn((function(n){J._vcFired=!0,J.on("versionchange").fire(n)})),sn||"__dbnames"===n||he.dbnames.put({name:n}).catch(X),e()}),t)}))]).then((function(){return V=[],An.resolve(_e.vip(J.on.ready.fire)).then((function n(){if(V.length>0){var e=V.reduce(an,X);return V=[],An.resolve(_e.vip(e)).then(n)}}))})).finally((function(){V=null})).then((function(){return z=!1,J})).catch((function(n){try{i&&i.abort()}catch(n){}return z=!1,J.close(),fe(L=n)})).finally((function(){Q=!0,e()}))},this.close=function(){var n=ye.indexOf(J);if(n>=0&&ye.splice(n,1),U){try{U.close()}catch(n){}U=null}I=!1,L=new G.DatabaseClosed,z&&a(L),Y=new An((function(n){t=n})),en=new An((function(n,e){a=e}))},this.delete=function(){var e=arguments.length>0;return new An((function(t,r){if(e)throw new G.InvalidArgument("Arguments not allowed in db.delete()");function i(){J.close();var e=T.deleteDatabase(n);e.onsuccess=Wn((function(){sn||he.dbnames.delete(n).catch(X),t()})),e.onerror=Ee(r),e.onblocked=Nn}z?Y.then(i):i()}))},this.backendDB=function(){return U},this.isOpen=function(){return null!==U},this.hasBeenClosed=function(){return L&&L instanceof G.DatabaseClosed},this.hasFailed=function(){return null!==L},this.dynamicallyOpened=function(){return un},this.name=n,f(this,{tables:{get:function(){return r(M).map((function(n){return M[n]}))}}}),this.on=le(this,"populate","blocked","versionchange",{ready:[an,X]}),this.on.ready.subscribe=m(this.on.ready.subscribe,(function(n){return function(e,t){_e.vip((function(){Q?(L||An.resolve().then(e),t&&n(e)):V?(V.push(e),t&&n(e)):(n(e),t||n((function n(){J.on.ready.unsubscribe(e),J.on.ready.unsubscribe(n)})))}))}})),this.transaction=function(){var n=dn.apply(this,arguments);return this._transaction.apply(this,n)},this._transaction=function(n,e,t){var r=On.trans;r&&r.db===J&&-1===n.indexOf("!")||(r=null);var i=-1!==n.indexOf("?");n=n.replace("!","").replace("?","");try{var o=e.map((function(n){var e=n instanceof yn?n.name:n;if("string"!=typeof e)throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return e}));if("r"==n||"readonly"==n)n="readonly";else{if("rw"!=n&&n!=$)throw new G.InvalidArgument("Invalid transaction mode: "+n);n=$}if(r){if("readonly"===r.mode&&n===$){if(!i)throw new G.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");r=null}r&&o.forEach((function(n){if(r&&-1===r.storeNames.indexOf(n)){if(!i)throw new G.SubTransaction("Table "+n+" not included in parent transaction.");r=null}})),i&&r&&!r.active&&(r=null)}}catch(n){return r?r._promise(null,(function(e,t){t(n)})):fe(n)}return r?r._promise(n,u,"lock"):On.trans?ue(On.transless,(function(){return J._whenReady(u)})):J._whenReady(u);function u(){return An.resolve().then((function(){var e,i=On.transless||On,u=J._createTransaction(n,o,C,r),a={trans:u,transless:i};r?u.idbtrans=r.idbtrans:u.create(),t.constructor===vn&&Zn();var s=An.follow((function(){if(e=t.call(u,u))if(e.constructor===pn){var n=ne.bind(null,null);e.then(n,n)}else"function"==typeof e.next&&"function"==typeof e.throw&&(e=Te(e))}),a);return(e&&"function"==typeof e.then?An.resolve(e).then((function(n){return u.active?n:fe(new G.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))})):s.then((function(){return e}))).then((function(n){return r&&u._resolve(),u._completion.then((function(){return n}))})).catch((function(n){return u._reject(n),fe(n)}))}))}},this.table=function(n){if(!c(M,n))throw new G.InvalidTable("Table "+n+" does not exist");return M[n]},f(yn.prototype,{_trans:function(n,e,t){var r=this._tx||On.trans;return r&&r.db===J?r===On.trans?r._promise(n,e,t):Xn((function(){return r._promise(n,e,t)}),{trans:r,transless:On.transless||On}):function n(e,t,r){if(Q||On.letThrough){var i=J._createTransaction(e,t,C);try{i.create()}catch(n){return fe(n)}return i._promise(e,(function(n,e){return Xn((function(){return On.trans=i,r(n,e,i)}))})).then((function(n){return i._completion.then((function(){return n}))}))}if(!z){if(!I)return fe(new G.DatabaseClosed);J.open().catch(X)}return Y.then((function(){return n(e,t,r)}))}(n,[this.name],e)},_idbstore:function(n,e,t){var r=this.name;return this._trans(n,(function(n,t,i){if(-1===i.storeNames.indexOf(r))throw new G.NotFound("Table"+r+" not part of transaction");return e(n,t,i.idbtrans.objectStore(r),i)}),t)},get:function(n,e){if(n&&n.constructor===Object)return this.where(n).first(e);var t=this;return this._idbstore("readonly",(function(e,r,i){var o=i.get(n);o.onerror=Ee(r),o.onsuccess=Wn((function(){e(t.hook.reading.fire(o.result))}),r)})).then(e)},where:function(n){if("string"==typeof n)return new wn(this,n);if(i(n))return new wn(this,"["+n.join("+")+"]");var e=r(n);if(1===e.length)return this.where(e[0]).equals(n[e[0]]);var t=this.schema.indexes.concat(this.schema.primKey).filter((function(n){return n.compound&&e.every((function(e){return n.keyPath.indexOf(e)>=0}))&&n.keyPath.every((function(n){return e.indexOf(n)>=0}))}))[0];if(t&&pe!==de)return this.where(t.name).equals(t.keyPath.map((function(e){return n[e]})));t||console.warn("The query "+JSON.stringify(n)+" on "+this.name+" would benefit of a compound index ["+e.join("+")+"]");var o=this.schema.idxByName,u=e.reduce((function(e,t){return[e[0]||o[t],e[0]||!o[t]?Kn(e[1],(function(e){return""+x(e,t)==""+n[t]})):e[1]]}),[null,null]),a=u[0];return a?this.where(a.name).equals(n[a.keyPath]).filter(u[1]):t?this.filter(u[1]):this.where(e).equals("")},count:function(n){return this.toCollection().count(n)},offset:function(n){return this.toCollection().offset(n)},limit:function(n){return this.toCollection().limit(n)},reverse:function(){return this.toCollection().reverse()},filter:function(n){return this.toCollection().and(n)},each:function(n){return this.toCollection().each(n)},toArray:function(n){return this.toCollection().toArray(n)},orderBy:function(n){return new _n(new wn(this,i(n)?"["+n.join("+")+"]":n))},toCollection:function(){return new _n(new wn(this))},mapToClass:function(n,e){this.schema.mappedClass=n;var t=Object.create(n.prototype);e&&ke(t,e),this.schema.instanceTemplate=t;var r=function(e){if(!e)return e;var t=Object.create(n.prototype);for(var r in e)if(c(e,r))try{t[r]=e[r]}catch(n){}return t};return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=r,this.hook("reading",r),n},defineClass:function(n){return this.mapToClass(_e.defineClass(n),n)},bulkDelete:function(n){return this.hook.deleting.fire===X?this._idbstore($,(function(e,t,r,i){e(gn(r,i,n,!1,X))})):this.where(":id").anyOf(n).delete().then((function(){}))},bulkPut:function(n,e){var t=this;return this._idbstore($,(function(r,i,o){if(!o.keyPath&&!t.schema.primKey.auto&&!e)throw new G.InvalidArgument("bulkPut() with non-inbound keys requires keys array in second argument");if(o.keyPath&&e)throw new G.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(e&&e.length!==n.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");if(0===n.length)return r();var u,a,s=function(n){0===c.length?r(n):i(new H(t.name+".bulkPut(): "+c.length+" of "+f+" operations failed",c))},c=[],f=n.length,l=t;if(t.hook.creating.fire===X&&t.hook.updating.fire===X){a=mn(c);for(var h=0,d=n.length;h<d;++h)(u=e?o.put(n[h],e[h]):o.put(n[h])).onerror=a;u.onerror=mn(c,s),u.onsuccess=je(s)}else{var p=e||o.keyPath&&n.map((function(n){return x(n,o.keyPath)})),v=p&&w(p,(function(e,t){return null!=e&&[e,n[t]]}));(p?l.where(":id").anyOf(p.filter((function(n){return null!=n}))).modify((function(){this.value=v[this.primKey],v[this.primKey]=null})).catch(W,(function(n){c=n.failures})).then((function(){for(var t=[],r=e&&[],i=p.length-1;i>=0;--i){var o=p[i];(null==o||v[o])&&(t.push(n[i]),e&&r.push(o),null!=o&&(v[o]=null))}return t.reverse(),e&&r.reverse(),l.bulkAdd(t,r)})).then((function(n){var e=p[p.length-1];return null!=e?e:n})):l.bulkAdd(n)).then(s).catch(H,(function(n){c=c.concat(n.failures),s()})).catch(i)}}),"locked")},bulkAdd:function(n,e){var t=this,r=this.hook.creating.fire;return this._idbstore($,(function(i,o,u,a){if(!u.keyPath&&!t.schema.primKey.auto&&!e)throw new G.InvalidArgument("bulkAdd() with non-inbound keys requires keys array in second argument");if(u.keyPath&&e)throw new G.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(e&&e.length!==n.length)throw new G.InvalidArgument("Arguments objects and keys must have the same length");if(0===n.length)return i();function s(n){0===h.length?i(n):o(new H(t.name+".bulkAdd(): "+h.length+" of "+d+" operations failed",h))}var c,f,l,h=[],d=n.length;if(r!==X){var p,v=u.keyPath;f=mn(h,null,!0),l=xe(null),k((function(){for(var t=0,i=n.length;t<i;++t){p={onerror:null,onsuccess:null};var o=e&&e[t],s=n[t],h=e?o:v?x(s,v):void 0,d=r.call(p,h,s,a);null==h&&null!=d&&(v?E(s=P(s),v,d):o=d),(c=null!=o?u.add(s,o):u.add(s))._hookCtx=p,t<i-1&&(c.onerror=f,p.onsuccess&&(c.onsuccess=l))}}),(function(n){throw p.onerror&&p.onerror(n),n})),c.onerror=mn(h,s,!0),c.onsuccess=xe(s)}else{f=mn(h);for(var y=0,m=n.length;y<m;++y)(c=e?u.add(n[y],e[y]):u.add(n[y])).onerror=f;c.onerror=mn(h,s),c.onsuccess=je(s)}}))},add:function(n,e){var t=this.hook.creating.fire;return this._idbstore($,(function(r,i,o,u){var a={onsuccess:null,onerror:null};if(t!==X){var s=null!=e?e:o.keyPath?x(n,o.keyPath):void 0,c=t.call(a,s,n,u);null==s&&null!=c&&(o.keyPath?E(n,o.keyPath,c):e=c)}try{var f=null!=e?o.add(n,e):o.add(n);f._hookCtx=a,f.onerror=Ie(i),f.onsuccess=xe((function(e){var t=o.keyPath;t&&E(n,t,e),r(e)}))}catch(n){throw a.onerror&&a.onerror(n),n}}))},put:function(n,e){var t=this,r=this.hook.creating.fire,i=this.hook.updating.fire;if(r!==X||i!==X){var o=this.schema.primKey.keyPath,u=void 0!==e?e:o&&x(n,o);return null==u?this.add(n):(n=P(n),this._trans($,(function(){return t.where(":id").equals(u).modify((function(){this.value=n})).then((function(r){return 0===r?t.add(n,e):u}))}),"locked"))}return this._idbstore($,(function(t,r,i){var o=void 0!==e?i.put(n,e):i.put(n);o.onerror=Ee(r),o.onsuccess=Wn((function(e){var r=i.keyPath;r&&E(n,r,e.target.result),t(o.result)}))}))},delete:function(n){return this.hook.deleting.subscribers.length?this.where(":id").equals(n).delete():this._idbstore($,(function(e,t,r){var i=r.delete(n);i.onerror=Ee(t),i.onsuccess=Wn((function(){e(i.result)}))}))},clear:function(){return this.hook.deleting.subscribers.length?this.toCollection().delete():this._idbstore($,(function(n,e,t){var r=t.clear();r.onerror=Ee(e),r.onsuccess=Wn((function(){n(r.result)}))}))},update:function(n,e){if("object"!=typeof e||i(e))throw new G.InvalidArgument("Modifications must be an object.");if("object"!=typeof n||i(n))return this.where(":id").equals(n).modify(e);r(e).forEach((function(t){E(n,t,e[t])}));var t=x(n,this.schema.primKey.keyPath);return void 0===t?fe(new G.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(t).modify(e)}}),f(bn.prototype,{_lock:function(){return g(!On.global),++this._reculock,1!==this._reculock||On.global||(On.lockOwnerFor=this),this},_unlock:function(){if(g(!On.global),0==--this._reculock)for(On.global||(On.lockOwnerFor=null);this._blockedFuncs.length>0&&!this._locked();){var n=this._blockedFuncs.shift();try{ue(n[1],n[0])}catch(n){}}return this},_locked:function(){return this._reculock&&On.lockOwnerFor!==this},create:function(n){var e=this;if(!this.mode)return this;if(g(!this.idbtrans),!n&&!U)switch(L&&L.name){case"DatabaseClosedError":throw new G.DatabaseClosed(L);case"MissingAPIError":throw new G.MissingAPI(L.message,L);default:throw new G.OpenFailed(L)}if(!this.active)throw new G.TransactionInactive;return g(null===this._completion._state),(n=this.idbtrans=n||U.transaction(Ae(this.storeNames),this.mode)).onerror=Wn((function(t){Oe(t),e._reject(n.error)})),n.onabort=Wn((function(t){Oe(t),e.active&&e._reject(new G.Abort(n.error)),e.active=!1,e.on("abort").fire(t)})),n.oncomplete=Wn((function(){e.active=!1,e._resolve()})),this},_promise:function(n,e,t){var r=this;if(n===$&&this.mode!==$)return fe(new G.ReadOnly("Transaction is readonly"));if(!this.active)return fe(new G.TransactionInactive);if(this._locked())return new An((function(i,o){r._blockedFuncs.push([function(){r._promise(n,e,t).then(i,o)},On])}));if(t)return Xn((function(){var n=new An((function(n,t){r._lock();var i=e(n,t,r);i&&i.then&&i.then(n,t)}));return n.finally((function(){return r._unlock()})),n._lib=!0,n}));var i=new An((function(n,t){var i=e(n,t,r);i&&i.then&&i.then(n,t)}));return i._lib=!0,i},_root:function(){return this.parent?this.parent._root():this},waitFor:function(n){var e=this._root();if(n=An.resolve(n),e._waitingFor)e._waitingFor=e._waitingFor.then((function(){return n}));else{e._waitingFor=n,e._waitingQueue=[];var t=e.idbtrans.objectStore(e.storeNames[0]);!function n(){for(++e._spinCount;e._waitingQueue.length;)e._waitingQueue.shift()();e._waitingFor&&(t.get(-1/0).onsuccess=n)}()}var r=e._waitingFor;return new An((function(t,i){n.then((function(n){return e._waitingQueue.push(Wn(t.bind(null,n)))}),(function(n){return e._waitingQueue.push(Wn(i.bind(null,n)))})).finally((function(){e._waitingFor===r&&(e._waitingFor=null)}))}))},abort:function(){this.active&&this._reject(new G.Abort),this.active=!1},tables:{get:(l="Transaction.tables",d=function(){return M},function(){return console.warn(l+" is deprecated. See https://github.com/dfahlander/Dexie.js/wiki/Deprecations. "+q(R(),1)),d.apply(this,arguments)})},table:function(n){return new yn(n,J.table(n).schema,this)}}),f(wn.prototype,(function(){function n(n,e,t){var r=n instanceof wn?new _n(n):n;return r._ctx.error=t?new t(e):new TypeError(e),r}function e(n){return new _n(n,(function(){return A.only("")})).limit(0)}function t(n,e,t,r,i,o){for(var u=Math.min(n.length,r.length),a=-1,s=0;s<u;++s){var c=e[s];if(c!==r[s])return i(n[s],t[s])<0?n.substr(0,s)+t[s]+t.substr(s+1):i(n[s],r[s])<0?n.substr(0,s)+r[s]+t.substr(s+1):a>=0?n.substr(0,a)+e[a]+t.substr(a+1):null;i(n[s],c)<0&&(a=s)}return u<r.length&&"next"===o?n+t.substr(n.length):u<n.length&&"prev"===o?n.substr(0,t.length):a<0?null:n.substr(0,a)+r[a]+t.substr(a+1)}function r(e,r,i,o){var u,a,s,c,f,l,h,d=i.length;if(!i.every((function(n){return"string"==typeof n})))return n(e,"String expected.");function p(n){u=function(n){return"next"===n?function(n){return n.toUpperCase()}:function(n){return n.toLowerCase()}}(n),a=function(n){return"next"===n?function(n){return n.toLowerCase()}:function(n){return n.toUpperCase()}}(n),s="next"===n?Cn:Dn;var e=i.map((function(n){return{lower:a(n),upper:u(n)}})).sort((function(n,e){return s(n.lower,e.lower)}));c=e.map((function(n){return n.upper})),f=e.map((function(n){return n.lower})),l=n,h="next"===n?"":o}p("next");var v=new _n(e,(function(){return A.bound(c[0],f[d-1]+o)}));v._ondirectionchange=function(n){p(n)};var y=0;return v._addAlgorithm((function(n,e,i){var o=n.key;if("string"!=typeof o)return!1;var u=a(o);if(r(u,f,y))return!0;for(var p=null,v=y;v<d;++v){var m=t(o,u,c[v],f[v],s,l);null===m&&null===p?y=v+1:(null===p||s(p,m)>0)&&(p=m)}return e(null!==p?function(){n.continue(p+h)}:i),!1})),v}return{between:function(t,r,i,o){i=!1!==i,o=!0===o;try{return In(t,r)>0||0===In(t,r)&&(i||o)&&(!i||!o)?e(this):new _n(this,(function(){return A.bound(t,r,!i,!o)}))}catch(e){return n(this,ve)}},equals:function(n){return new _n(this,(function(){return A.only(n)}))},above:function(n){return new _n(this,(function(){return A.lowerBound(n,!0)}))},aboveOrEqual:function(n){return new _n(this,(function(){return A.lowerBound(n)}))},below:function(n){return new _n(this,(function(){return A.upperBound(n,!0)}))},belowOrEqual:function(n){return new _n(this,(function(){return A.upperBound(n)}))},startsWith:function(e){return"string"!=typeof e?n(this,"String expected."):this.between(e,e+de,!0,!0)},startsWithIgnoreCase:function(n){return""===n?this.startsWith(n):r(this,(function(n,e){return 0===n.indexOf(e[0])}),[n],de)},equalsIgnoreCase:function(n){return r(this,(function(n,e){return n===e[0]}),[n],"")},anyOfIgnoreCase:function(){var n=K.apply(D,arguments);return 0===n.length?e(this):r(this,(function(n,e){return-1!==e.indexOf(n)}),n,"")},startsWithAnyOfIgnoreCase:function(){var n=K.apply(D,arguments);return 0===n.length?e(this):r(this,(function(n,e){return e.some((function(e){return 0===n.indexOf(e)}))}),n,de)},anyOf:function(){var t=K.apply(D,arguments),r=Pn;try{t.sort(r)}catch(e){return n(this,ve)}if(0===t.length)return e(this);var i=new _n(this,(function(){return A.bound(t[0],t[t.length-1])}));i._ondirectionchange=function(n){r="next"===n?Pn:Sn,t.sort(r)};var o=0;return i._addAlgorithm((function(n,e,i){for(var u=n.key;r(u,t[o])>0;)if(++o===t.length)return e(i),!1;return 0===r(u,t[o])||(e((function(){n.continue(t[o])})),!1)})),i},notEqual:function(n){return this.inAnyRange([[-1/0,n],[n,pe]],{includeLowers:!1,includeUppers:!1})},noneOf:function(){var e=K.apply(D,arguments);if(0===e.length)return new _n(this);try{e.sort(Pn)}catch(e){return n(this,ve)}var t=e.reduce((function(n,e){return n?n.concat([[n[n.length-1][1],e]]):[[-1/0,e]]}),null);return t.push([e[e.length-1],pe]),this.inAnyRange(t,{includeLowers:!1,includeUppers:!1})},inAnyRange:function(t,r){if(0===t.length)return e(this);if(!t.every((function(n){return void 0!==n[0]&&void 0!==n[1]&&Pn(n[0],n[1])<=0})))return n(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",G.InvalidArgument);var i=!r||!1!==r.includeLowers,o=r&&!0===r.includeUppers;var u,a=Pn;function s(n,e){return a(n[0],e[0])}try{(u=t.reduce((function(n,e){for(var t=0,r=n.length;t<r;++t){var i=n[t];if(In(e[0],i[1])<0&&In(e[1],i[0])>0){i[0]=(o=i[0],u=e[0],In(o,u)<0?o:u),i[1]=Tn(i[1],e[1]);break}}var o,u;return t===r&&n.push(e),n}),[])).sort(s)}catch(e){return n(this,ve)}var c=0,f=o?function(n){return Pn(n,u[c][1])>0}:function(n){return Pn(n,u[c][1])>=0},l=i?function(n){return Sn(n,u[c][0])>0}:function(n){return Sn(n,u[c][0])>=0};var h=f,d=new _n(this,(function(){return A.bound(u[0][0],u[u.length-1][1],!i,!o)}));return d._ondirectionchange=function(n){"next"===n?(h=f,a=Pn):(h=l,a=Sn),u.sort(s)},d._addAlgorithm((function(n,e,t){for(var r=n.key;h(r);)if(++c===u.length)return e(t),!1;return!!function(n){return!f(n)&&!l(n)}(r)||(0===In(r,u[c][1])||0===In(r,u[c][0])||e((function(){a===Pn?n.continue(u[c][0]):n.continue(u[c][1])})),!1)})),d},startsWithAnyOf:function(){var t=K.apply(D,arguments);return t.every((function(n){return"string"==typeof n}))?0===t.length?e(this):this.inAnyRange(t.map((function(n){return[n,n+de]}))):n(this,"startsWithAnyOf() only works with strings")}}})),f(_n.prototype,(function(){function n(n,e){n.filter=Kn(n.filter,e)}function e(n,e,t){var r=n.replayFilter;n.replayFilter=r?function(){return Kn(r(),e())}:e,n.justLimit=t&&!r}function t(n,e){if(n.isPrimKey)return e;var t=n.table.schema.idxByName[n.index];if(!t)throw new G.Schema("KeyPath "+n.index+" on object store "+e.name+" is not indexed");return e.index(t.name)}function i(n,e){var r=t(n,e);return n.keysOnly&&"openKeyCursor"in r?r.openKeyCursor(n.range||null,n.dir+n.unique):r.openCursor(n.range||null,n.dir+n.unique)}function o(n,e,t,r,o){var u=n.replayFilter?Kn(n.filter,n.replayFilter()):n.filter;n.or?function(){var a={},s=0;function f(){2==++s&&t()}function l(n,t,i){if(!u||u(t,i,f,r)){var o=t.primaryKey,s=""+o;"[object ArrayBuffer]"===s&&(s=""+new Uint8Array(o)),c(a,s)||(a[s]=!0,e(n,t,i))}}n.or._iterate(l,f,r,o),jn(i(n,o),n.algorithm,l,f,r,!n.keysOnly&&n.valueMapper)}():jn(i(n,o),Kn(n.algorithm,u),e,t,r,!n.keysOnly&&n.valueMapper)}return{_read:function(n,e){var t=this._ctx;return t.error?t.table._trans(null,fe.bind(null,t.error)):t.table._idbstore("readonly",n).then(e)},_write:function(n){var e=this._ctx;return e.error?e.table._trans(null,fe.bind(null,e.error)):e.table._idbstore($,n,"locked")},_addAlgorithm:function(n){var e=this._ctx;e.algorithm=Kn(e.algorithm,n)},_iterate:function(n,e,t,r){return o(this._ctx,n,e,t,r)},clone:function(n){var e=Object.create(this.constructor.prototype),t=Object.create(this._ctx);return n&&u(t,n),e._ctx=t,e},raw:function(){return this._ctx.valueMapper=null,this},each:function(n){var e=this._ctx;return this._read((function(t,r,i){o(e,n,t,r,i)}))},count:function(n){var e=this._ctx;if(kn(e,!0))return this._read((function(n,r,i){var o=t(e,i),u=e.range?o.count(e.range):o.count();u.onerror=Ee(r),u.onsuccess=function(t){n(Math.min(t.target.result,e.limit))}}),n);var r=0;return this._read((function(n,t,i){o(e,(function(){return++r,!1}),(function(){n(r)}),t,i)}),n)},sortBy:function(n,e){var t=n.split(".").reverse(),r=t[0],i=t.length-1;function o(n,e){return e?o(n[t[e]],e-1):n[r]}var u="next"===this._ctx.dir?1:-1;function a(n,e){var t=o(n,i),r=o(e,i);return t<r?-u:t>r?u:0}return this.toArray((function(n){return n.sort(a)})).then(e)},toArray:function(n){var e=this._ctx;return this._read((function(n,r,i){if(s&&"next"===e.dir&&kn(e,!0)&&e.limit>0){var u=e.table.hook.reading.fire,a=t(e,i),c=e.limit<1/0?a.getAll(e.range,e.limit):a.getAll(e.range);c.onerror=Ee(r),c.onsuccess=je(u===Z?n:function(e){try{n(e.map(u))}catch(n){r(n)}})}else{var f=[];o(e,(function(n){f.push(n)}),(function(){n(f)}),r,i)}}),n)},offset:function(n){var t=this._ctx;return n<=0||(t.offset+=n,kn(t)?e(t,(function(){var e=n;return function(n,t){return 0===e||(1===e?(--e,!1):(t((function(){n.advance(e),e=0})),!1))}})):e(t,(function(){var e=n;return function(){return--e<0}}))),this},limit:function(n){return this._ctx.limit=Math.min(this._ctx.limit,n),e(this._ctx,(function(){var e=n;return function(n,t,r){return--e<=0&&t(r),e>=0}}),!0),this},until:function(e,t){return n(this._ctx,(function(n,r,i){return!e(n.value)||(r(i),t)})),this},first:function(n){return this.limit(1).toArray((function(n){return n[0]})).then(n)},last:function(n){return this.reverse().first(n)},filter:function(e){return n(this._ctx,(function(n){return e(n.value)})),function(n,e){n.isMatch=Kn(n.isMatch,e)}(this._ctx,e),this},and:function(n){return this.filter(n)},or:function(n){return new wn(this._ctx.table,n,this)},reverse:function(){return this._ctx.dir="prev"===this._ctx.dir?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},desc:function(){return this.reverse()},eachKey:function(n){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,t){n(t.key,t)}))},eachUniqueKey:function(n){return this._ctx.unique="unique",this.eachKey(n)},eachPrimaryKey:function(n){var e=this._ctx;return e.keysOnly=!e.isMatch,this.each((function(e,t){n(t.primaryKey,t)}))},keys:function(n){var e=this._ctx;e.keysOnly=!e.isMatch;var t=[];return this.each((function(n,e){t.push(e.key)})).then((function(){return t})).then(n)},primaryKeys:function(n){var e=this._ctx;if(s&&"next"===e.dir&&kn(e,!0)&&e.limit>0)return this._read((function(n,r,i){var o=t(e,i),u=e.limit<1/0?o.getAllKeys(e.range,e.limit):o.getAllKeys(e.range);u.onerror=Ee(r),u.onsuccess=je(n)})).then(n);e.keysOnly=!e.isMatch;var r=[];return this.each((function(n,e){r.push(e.primaryKey)})).then((function(){return r})).then(n)},uniqueKeys:function(n){return this._ctx.unique="unique",this.keys(n)},firstKey:function(n){return this.limit(1).keys((function(n){return n[0]})).then(n)},lastKey:function(n){return this.reverse().firstKey(n)},distinct:function(){var e=this._ctx,t=e.index&&e.table.schema.idxByName[e.index];if(!t||!t.multi)return this;var r={};return n(this._ctx,(function(n){var e=n.primaryKey.toString(),t=c(r,e);return r[e]=!0,!t})),this},modify:function(n){var e=this,t=this._ctx.table.hook,i=t.updating.fire,o=t.deleting.fire;return this._write((function(t,a,s,f){var l;if("function"==typeof n)l=i===X&&o===X?n:function(e){var t=P(e);if(!1===n.call(this,e,this))return!1;if(c(this,"value")){var u=S(t,this.value),a=i.call(this,u,this.primKey,t,f);a&&(e=this.value,r(a).forEach((function(n){E(e,n,a[n])})))}else o.call(this,this.primKey,e,f)};else if(i===X){var h=r(n),d=h.length;l=function(e){for(var t=!1,r=0;r<d;++r){var i=h[r],o=n[i];x(e,i)!==o&&(E(e,i,o),t=!0)}return t}}else{var p=n;n=j(p),l=function(e){var t=!1,o=i.call(this,n,this.primKey,P(e),f);return o&&u(n,o),r(n).forEach((function(r){var i=n[r];x(e,r)!==i&&(E(e,r,i),t=!0)})),o&&(n=j(p)),t}}var v=0,y=0,m=!1,g=[],b=[],w=null;function _(n){return n&&(g.push(n),b.push(w)),a(new W("Error modifying one or more objects",g,y,b))}function I(){m&&y+g.length===v&&(g.length>0?_():t(y))}e.clone().raw()._iterate((function(n,e){w=e.primaryKey;var t={primKey:e.primaryKey,value:n,onsuccess:null,onerror:null};function r(n){return g.push(n),b.push(t.primKey),I(),!0}if(!1!==l.call(t,n,t)){var i=!c(t,"value");++v,k((function(){var n=i?e.delete():e.update(t.value);n._hookCtx=t,n.onerror=Ie(r),n.onsuccess=xe((function(){++y,I()}))}),r)}else t.onsuccess&&t.onsuccess(t.value)}),(function(){m=!0,I()}),_,s)}))},delete:function(){var n=this,e=this._ctx,t=e.range,r=e.table.hook.deleting.fire,i=r!==X;if(!i&&kn(e)&&(e.isPrimKey&&!be||!t))return this._write((function(n,e,r){var i=Ee(e),o=t?r.count(t):r.count();o.onerror=i,o.onsuccess=function(){var u=o.result;k((function(){var e=t?r.delete(t):r.clear();e.onerror=i,e.onsuccess=function(){return n(u)}}),(function(n){return e(n)}))}}));var o=i?2e3:1e4;return this._write((function(t,u,a,s){var c=0,f=n.clone({keysOnly:!e.isMatch&&!i}).distinct().limit(o).raw(),l=[],h=function(){return f.each(i?function(n,e){l.push([e.primaryKey,e.value])}:function(n,e){l.push(e.primaryKey)}).then((function(){return i?l.sort((function(n,e){return Pn(n[0],e[0])})):l.sort(Pn),gn(a,s,l,i,r)})).then((function(){var n=l.length;return c+=n,l=[],n<o?c:h()}))};t(h())}))}}})),u(this,{Collection:_n,Table:yn,Transaction:bn,Version:cn,WhereClause:wn}),J.on("versionchange",(function(n){n.newVersion>0?console.warn("Another connection wants to upgrade database '"+J.name+"'. Closing db now to resume the upgrade."):console.warn("Another connection wants to delete database '"+J.name+"'. Closing db now to resume the delete request."),J.close()})),J.on("blocked",(function(n){!n.newVersion||n.newVersion<n.oldVersion?console.warn("Dexie.delete('"+J.name+"') was blocked"):console.warn("Upgrade '"+J.name+"' blocked by other connection holding version "+n.oldVersion/10)})),b.forEach((function(n){n(J)}))}function ke(n,e){return r(e).forEach((function(t){var r=function n(e){if("function"==typeof e)return new e;if(i(e))return[n(e[0])];if(e&&"object"==typeof e){var t={};return ke(t,e),t}return e}(e[t]);n[t]=r})),n}function xe(n){return Wn((function(e){var t=e.target,r=t._hookCtx,i=r.value||t.result,o=r&&r.onsuccess;o&&o(i),n&&n(i)}),n)}function Ee(n){return Wn((function(e){return Oe(e),n(e.target.error),!1}))}function je(n){return Wn((function(e){n(e.target.result)}))}function Ie(n){return Wn((function(e){var t=e.target,r=t.error,i=t._hookCtx,o=i&&i.onerror;return o&&o(r),Oe(e),n(r),!1}))}function Oe(n){n.stopPropagation&&n.stopPropagation(),n.preventDefault&&n.preventDefault()}function Te(n){var e=function(e){return n.next(e)},t=o(e),r=o((function(e){return n.throw(e)}));function o(n){return function(e){var o=n(e),u=o.value;return o.done?u:u&&"function"==typeof u.then?u.then(t,r):i(u)?An.all(u).then(t,r):t(u)}}return o(e)()}function Pe(n,e,t,r,i,o,u){this.name=n,this.keyPath=e,this.unique=t,this.multi=r,this.auto=i,this.compound=o,this.dotted=u;var a="string"==typeof e?e:e&&"["+[].join.call(e,"+")+"]";this.src=(t?"&":"")+(r?"*":"")+(i?"++":"")+a}function Se(n,e,t,r){this.name=n,this.primKey=e||new Pe,this.indexes=t||[new Pe],this.instanceTemplate=r,this.mappedClass=null,this.idxByName=w(t,(function(n){return[n.name,n]}))}function Ae(n){return 1===n.length?n[0]:n}function Ce(n){var e=n&&(n.getDatabaseNames||n.webkitGetDatabaseNames);return e&&e.bind(n)}N(F,we),f(_e,Y),f(_e,{delete:function(n){var e=new _e(n),t=e.delete();return t.onblocked=function(n){return e.on("blocked",n),this},t},exists:function(n){return new _e(n).open().then((function(n){return n.close(),!0})).catch(_e.NoSuchDatabaseError,(function(){return!1}))},getDatabaseNames:function(n){var e=Ce(_e.dependencies.indexedDB);return e?new An((function(n,t){var r=e();r.onsuccess=function(e){n(y(e.target.result,0))},r.onerror=Ee(t)})).then(n):he.dbnames.toCollection().primaryKeys(n)},defineClass:function(){return function(n){n&&u(this,n)}},applyStructure:ke,ignoreTransaction:function(n){return On.trans?ue(On.transless,n):n()},vip:function(n){return Xn((function(){return On.letThrough=!0,n()}))},async:function(n){return function(){try{var e=Te(n.apply(this,arguments));return e&&"function"==typeof e.then?e:An.resolve(e)}catch(n){return fe(n)}}},spawn:function(n,e,t){try{var r=Te(n.apply(t,e||[]));return r&&"function"==typeof r.then?r:An.resolve(r)}catch(n){return fe(n)}},currentTransaction:{get:function(){return On.trans||null}},waitFor:function(n,e){var t=An.resolve("function"==typeof n?_e.ignoreTransaction(n):n).timeout(e||6e4);return On.trans?On.trans.waitFor(t):t},Promise:An,debug:{get:function(){return F},set:function(n){N(n,"dexie"===n?function(){return!0}:we)}},derive:d,extend:u,props:f,override:m,Events:le,getByKeyPath:x,setByKeyPath:E,delByKeyPath:function(n,e){"string"==typeof e?E(n,e,void 0):"length"in e&&[].map.call(e,(function(e){E(n,e,void 0)}))},shallowClone:j,deepClone:P,getObjectDiff:S,asap:b,maxKey:pe,minKey:-1/0,addons:[],connections:ye,MultiModifyError:G.Modify,errnames:Q,IndexSpec:Pe,TableSchema:Se,dependencies:function(){try{return{indexedDB:o.indexedDB||o.mozIndexedDB||o.webkitIndexedDB||o.msIndexedDB,IDBKeyRange:o.IDBKeyRange||o.webkitIDBKeyRange}}catch(n){return{indexedDB:null,IDBKeyRange:null}}}(),semVer:"{version}",version:"{version}".split(".").map((function(n){return parseInt(n)})).reduce((function(n,e,t){return n+e/Math.pow(10,2*t)})),default:_e,Dexie:_e}),An.rejectionMapper=function(n,e){if(!n||n instanceof V||n instanceof TypeError||n instanceof SyntaxError||!n.name||!J[n.name])return n;var t=new J[n.name](e||n.message,n);return"stack"in n&&h(t,"stack",{get:function(){return this.inner.stack}}),t},(he=new _e("__dbnames")).version(1).stores({dbnames:"name"}),function(){try{void 0!==typeof localStorage&&void 0!==o.document&&(JSON.parse(localStorage.getItem("Dexie.DatabaseNames")||"[]").forEach((function(n){return he.dbnames.put({name:n}).catch(X)})),localStorage.removeItem("Dexie.DatabaseNames"))}catch(n){}}(),e.a=_e}).call(this,t(20),t(104).setImmediate)},341:function(n,e,t){(function(n,e){!function(n,t){"use strict";if(!n.setImmediate){var r,i,o,u,a,s=1,c={},f=!1,l=n.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(n);h=h&&h.setTimeout?h:n,"[object process]"==={}.toString.call(n.process)?r=function(n){e.nextTick((function(){p(n)}))}:!function(){if(n.postMessage&&!n.importScripts){var e=!0,t=n.onmessage;return n.onmessage=function(){e=!1},n.postMessage("","*"),n.onmessage=t,e}}()?n.MessageChannel?((o=new MessageChannel).port1.onmessage=function(n){p(n.data)},r=function(n){o.port2.postMessage(n)}):l&&"onreadystatechange"in l.createElement("script")?(i=l.documentElement,r=function(n){var e=l.createElement("script");e.onreadystatechange=function(){p(n),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(n){setTimeout(p,0,n)}:(u="setImmediate$"+Math.random()+"$",a=function(e){e.source===n&&"string"==typeof e.data&&0===e.data.indexOf(u)&&p(+e.data.slice(u.length))},n.addEventListener?n.addEventListener("message",a,!1):n.attachEvent("onmessage",a),r=function(e){n.postMessage(u+e,"*")}),h.setImmediate=function(n){"function"!=typeof n&&(n=new Function(""+n));for(var e=new Array(arguments.length-1),t=0;t<e.length;t++)e[t]=arguments[t+1];var i={callback:n,args:e};return c[s]=i,r(s),s++},h.clearImmediate=d}function d(n){delete c[n]}function p(n){if(f)setTimeout(p,0,n);else{var e=c[n];if(e){f=!0;try{!function(n){var e=n.callback,t=n.args;switch(t.length){case 0:e();break;case 1:e(t[0]);break;case 2:e(t[0],t[1]);break;case 3:e(t[0],t[1],t[2]);break;default:e.apply(void 0,t)}}(e)}finally{d(n),f=!1}}}}}("undefined"==typeof self?void 0===n?this:n:self)}).call(this,t(20),t(16))},83:function(n,e,t){(function(n){function t(n,e){for(var t=0,r=n.length-1;r>=0;r--){var i=n[r];"."===i?n.splice(r,1):".."===i?(n.splice(r,1),t++):t&&(n.splice(r,1),t--)}if(e)for(;t--;t)n.unshift("..");return n}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,i=function(n){return r.exec(n).slice(1)};function o(n,e){if(n.filter)return n.filter(e);for(var t=[],r=0;r<n.length;r++)e(n[r],r,n)&&t.push(n[r]);return t}e.resolve=function(){for(var e="",r=!1,i=arguments.length-1;i>=-1&&!r;i--){var u=i>=0?arguments[i]:n.cwd();if("string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(e=u+"/"+e,r="/"===u.charAt(0))}return(r?"/":"")+(e=t(o(e.split("/"),(function(n){return!!n})),!r).join("/"))||"."},e.normalize=function(n){var r=e.isAbsolute(n),i="/"===u(n,-1);return(n=t(o(n.split("/"),(function(n){return!!n})),!r).join("/"))||r||(n="."),n&&i&&(n+="/"),(r?"/":"")+n},e.isAbsolute=function(n){return"/"===n.charAt(0)},e.join=function(){var n=Array.prototype.slice.call(arguments,0);return e.normalize(o(n,(function(n,e){if("string"!=typeof n)throw new TypeError("Arguments to path.join must be strings");return n})).join("/"))},e.relative=function(n,t){function r(n){for(var e=0;e<n.length&&""===n[e];e++);for(var t=n.length-1;t>=0&&""===n[t];t--);return e>t?[]:n.slice(e,t-e+1)}n=e.resolve(n).substr(1),t=e.resolve(t).substr(1);for(var i=r(n.split("/")),o=r(t.split("/")),u=Math.min(i.length,o.length),a=u,s=0;s<u;s++)if(i[s]!==o[s]){a=s;break}var c=[];for(s=a;s<i.length;s++)c.push("..");return(c=c.concat(o.slice(a))).join("/")},e.sep="/",e.delimiter=":",e.dirname=function(n){var e=i(n),t=e[0],r=e[1];return t||r?(r&&(r=r.substr(0,r.length-1)),t+r):"."},e.basename=function(n,e){var t=i(n)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t},e.extname=function(n){return i(n)[3]};var u="b"==="ab".substr(-1)?function(n,e,t){return n.substr(e,t)}:function(n,e,t){return e<0&&(e=n.length+e),n.substr(e,t)}}).call(this,t(16))}}]);