(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{102:function(e,t,o){"use strict";o.r(t);class r{constructor(){this.isClsSVG=!1,this.activated=!1}get renderer(){if(this._renderer)return this._renderer;throw new Error("Renderer is not inited")}setRenderer(e){this.activated?this.deactivate().then(()=>{if(this._renderer=e,this._renderer)return this.activate()}):this._renderer=e}activate(){return this._renderer?this.bindRenderer().then(()=>{this.activated=!0}):Promise.reject(new Error("Renederer is not set. cannot activate"))}deactivate(){return this.unbindRenderer().then(()=>{this.activated=!1})}}var n=o(22);class s extends r{constructor(){super(...arguments),this.name="tool_hand_name",this.slug="tool_hand",this.cls="fas fa-hand-paper",this.mouseDown=!1,this.onMouseDown=e=>{if(e){this.mouseDown=!0;const t=e.e;this.lastPoint={x:t.clientX,y:t.clientY},n.b.dispatch({type:"toolStateHandPanStart"}),t.stopPropagation(),t.preventDefault()}},this.onMouseMove=e=>{if(this.mouseDown&&e){const t=e.e,o={x:t.clientX,y:t.clientY},r=this.renderer;this.lastPoint&&(r.panX(r.panX()-o.x+this.lastPoint.x),r.panY(r.panY()-o.y+this.lastPoint.y)),this.lastPoint=o,t.stopPropagation(),t.preventDefault()}},this.onMouseUpAndLeave=e=>{if(this.mouseDown=!1,this.lastPoint=void 0,n.b.dispatch({type:"toolStateHandPanEnd"}),e){const t=e.e;t.stopPropagation(),t.preventDefault()}}}async bindRenderer(){const e=this.renderer;e.on("mousedown",this.onMouseDown),e.on("mousemove",this.onMouseMove),e.on("mouseup",this.onMouseUpAndLeave),e.on("mouseleave",this.onMouseUpAndLeave)}async unbindRenderer(){const e=this.renderer;e.off("mousedown",this.onMouseDown),e.off("mousemove",this.onMouseMove),e.off("mouseup",this.onMouseUpAndLeave),e.off("mouseleave",this.onMouseUpAndLeave)}}var a=o(128),i=o(197),c=o(27);class l extends r{constructor(){super(...arguments),this.name="tool_inspect_name",this.slug="tool_inspect",this.cls="fas fa-mouse-pointer",this.isClsSVG=!1,this.hoverLayers=[],this.onMouseDown=e=>{const t=this.hoverLayers[0];if(t&&t!==this.compositeChoseLayer){const o=e.e;o.metaKey||o.shiftKey||o.ctrlKey?(Object(c.a)("choose_layer_canvas_multi"),n.b.dispatch({type:"toolStateToggleChoseLayer",layers:[t]})):(Object(c.a)("choose_layer_canvas_single"),n.b.dispatch({type:"toolStateChoseLayer",layers:[t]}))}this.hoverLayers.length>0&&n.b.dispatch({type:"toolStateNeabyLayers",layers:this.hoverLayers.concat([])})},this.onMouseMove=async e=>{if(e){const t=this.renderer.rendererPointToRealPoint(this.renderer.mouseEventToCoords(e),!1),o=this.renderer.pageByRealCoords(t);if(o){const e=this.renderer.realPointToPagePoint(t,o),r=(await Object(i.a)(e,await o.getLayers())).map(e=>e.layer);this.renderer.clearDrawing(this.hoverLayerGroup),this.hoverLayers=r,this.drawHoverLayer(),this.prepareDrawMeasure()}else this.renderer.clearDrawing(this.hoverLayerGroup),this.renderer.clearDrawing(this.measureLinesGroup),this.hoverLayers=[]}},this.refreshTimer=void 0,this.refreshDrawing=()=>{this.refreshTimer&&clearTimeout(this.refreshTimer),this.refreshTimer=setTimeout(()=>{this.refreshTimer=void 0,this.renderer.clearDrawing(this.hoverLayerGroup),this.drawHoverLayer(),this.drawCompositeLayer(),this.prepareDrawMeasure()},50)}}get choseLayers(){return n.b.getState().toolState.choseLayers}get compositeChoseLayer(){return Object(a.b)(this.choseLayers)}get hoverLayer(){return this.hoverLayers[0]}get zoomLevel(){return n.b.getState().canvasState.zoomLevel}get metricScale(){return n.b.getState().canvasState.metricScale}prepareDrawMeasure(){this.renderer.clearDrawing(this.measureLinesGroup),this.compositeChoseLayer&&this.hoverLayer&&this.compositeChoseLayer!==this.hoverLayer&&this.compositeChoseLayer.page===this.hoverLayer.page&&this.drawMeasurement(this.compositeChoseLayer,this.hoverLayer)}drawMeasurement(e,t){const o=e.rect.panTo(this.renderer.pagePointToRealPoint(e.rect.leftTop,e.page)).zoom(this.zoomLevel),r=t.rect.panTo(this.renderer.pagePointToRealPoint(t.rect.leftTop,e.page)).zoom(this.zoomLevel),n=o.distance(r);for(const e in n)if(n.hasOwnProperty(e)){const t=n[e];if(0===t)continue;const s=e[0],a=e[1],i=Math.round(t/this.metricScale/this.zoomLevel);switch(s){case"l":case"r":this.drawVLineMeasurements("l"===s?o.left:o.right,o.top,o.bottom,"l"===a?r.left:r.right,r.top,r.bottom,o.left>r.left,i.toString());break;case"t":case"b":this.drawHLineMeasurements("t"===s?o.top:o.bottom,o.left,o.right,"t"===a?r.top:r.bottom,r.left,r.right,o.top>r.top,i.toString())}}}drawMeasureLineOnRenderer(e,t,o){this.renderer.draw({...o,x1:e.x,y1:e.y,x2:t.x,y2:t.y},this.measureLinesGroup)}drawMeasureLabelOnRenderer(e){e={...e,textBackgroundFill:"black",fillColor:"white",fontSize:14,fontWeight:"bold"};var t=this.renderer.measureText(e.txt,e);e.top-=t.height/2,e.left-=t.width/2,this.renderer.draw(e,this.measureLinesGroup)}drawVLineMeasurements(e,t,o,r,n,s,a,i){const c={strokeColor:"orange",strokeDashArray:"5 5",strokeWidth:1},l={strokeColor:"orange",strokeWidth:1};let p=Math.min(t,o,n,s),u=Math.max(t,o,n,s);if(e===r)return void this.drawMeasureLineOnRenderer({x:e,y:p},{x:e,y:u},c);if(a){const a=r;r=e,e=a,p=n,n=t,t=p,u=s,s=o,o=u}t>s&&this.drawMeasureLineOnRenderer({x:e,y:t},{x:e,y:n},c),o<n&&this.drawMeasureLineOnRenderer({x:e,y:o},{x:e,y:s},c);const h=d(t,o,n,s);let b=0;b=h?Math.round((h.s+h.e)/2):Math.round((n+s)/2),this.drawMeasureLineOnRenderer({x:e,y:b},{x:r,y:b},l),this.drawMeasureLabelOnRenderer({left:(e+r)/2,top:b,txt:i})}drawHLineMeasurements(e,t,o,r,n,s,a,i){const c={strokeColor:"orange",strokeDashArray:"5 5",strokeWidth:1},l={strokeColor:"orange",strokeWidth:1};let p=Math.min(t,o,n,s),u=Math.max(t,o,n,s);if(e===r)return void this.drawMeasureLineOnRenderer({x:e,y:p},{x:e,y:u},c);if(a){const a=r;r=e,e=a,p=n,n=t,t=p,u=s,s=o,o=u}t>s&&this.drawMeasureLineOnRenderer({x:t,y:e},{x:n,y:e},c),o<n&&this.drawMeasureLineOnRenderer({x:o,y:e},{x:s,y:e},c);const h=d(t,o,n,s);let b=0;b=h?Math.round((h.s+h.e)/2):Math.round((n+s)/2),this.drawMeasureLineOnRenderer({x:b,y:e},{x:b,y:r},l),this.drawMeasureLabelOnRenderer({left:b,top:(e+r)/2,txt:i})}drawLayer(e,t){if(t){const{layer:o,rect:r,txt:n}=t,s=t.layer.page,a=this.zoomLevel,i=this.renderer.pagePointToRealPoint({x:o.rect.left,y:o.rect.top},s),c=o.rect.zoom(1/this.metricScale),l=`  ${Math.round(c.width)} x ${Math.round(c.height)}    `,d={...r,left:i.x*a,top:i.y*a,width:o.rect.width*a,height:o.rect.height*a},p={...t.txt,fontWeight:"bold",left:i.x*a,top:i.y*a,textBackgroundFill:r.strokeColor,txt:l};this.renderer.draw(d,e),this.renderer.draw(p,e)}else this.renderer.clearDrawing(e)}drawCompositeLayer(){this.drawLayer(this.choseLayerGroup),this.compositeChoseLayer&&this.drawLayer(this.choseLayerGroup,{layer:this.compositeChoseLayer,rect:{fillColor:"rgba(112,0,0,1)".replace("1)","0.2)"),strokeColor:"rgba(112,0,0,1)"},txt:{fontSize:14,fillColor:"white"}})}drawHoverLayer(){this.drawLayer(this.hoverLayerGroup),this.hoverLayer&&this.drawLayer(this.hoverLayerGroup,{layer:this.hoverLayer,rect:{fillColor:"rgba(0, 68, 37,1)".replace("1)","0.2)"),strokeColor:"rgba(0, 68, 37,1)"},txt:{fontSize:14,fillColor:"white"}})}async bindRenderer(){const e=this.renderer;e.on("mousemove",this.onMouseMove),e.on("click",this.onMouseDown),this.hoverLayerGroup=e.getDrawableGroup(),this.choseLayerGroup=e.getDrawableGroup(),this.measureLinesGroup=e.getDrawableGroup(),this.unsubscribe=Object(n.c)([Object(n.a)(e=>e.toolState.choseLayers,this.refreshDrawing),Object(n.a)(e=>e.canvasState.metricScale,this.refreshDrawing),Object(n.a)(e=>e.canvasState.zoomLevel,this.refreshDrawing)])}async unbindRenderer(){const e=this.renderer;e.off("click",this.onMouseDown),e.off("mousemove",this.onMouseMove),e.removeDrawableGroup(this.hoverLayerGroup),e.removeDrawableGroup(this.choseLayerGroup),e.removeDrawableGroup(this.measureLinesGroup),this.hoverLayerGroup=void 0,this.choseLayerGroup=void 0,this.measureLinesGroup=void 0,this.unsubscribe&&this.unsubscribe()}}function d(e,t,o,r){const n=Math.max(e,o),s=Math.min(t,r);return s>=n?{s:n,e:s}:null}var p=o(23),u=o(25),h=o(51);class b extends r{constructor(){super(...arguments),this.name="tool_color_name",this.slug="tool_color",this.cls="fas fa-eye-dropper",this.inited=!1,this.onMouseDown=e=>{this.hoverColor&&(n.b.dispatch({type:"toolStateColorPick",color:this.hoverColor}),Object(h.copyColor)(this.hoverColor))},this.onMouseMove=async e=>{if(e){const t=this.renderer.rendererPointToRealPoint(this.renderer.mouseEventToCoords(e),!1),o=this.renderer.pageByRealCoords(t);if(o){if(this.curPageContext&&this.curPageContext.page!==o&&(this.curPageContext=void 0),!this.curPageContext){const e=await o.getPreview(),t=Object(u.imgToCanvas)(e),r=e;this.curPageContext={page:o,magImg:r,pageCanvas:t}}const e=this.renderer.realPointToPagePoint(t,o),r=this.curPageContext.pageCanvas.getContext("2d").getImageData(e.x,e.y,1,1);this.drawColor(r.data[0],r.data[1],r.data[2],e,o),this.hoverColor=`rgb(${r.data[0]}, ${r.data[1]},${r.data[2]})`,n.b.dispatch({type:"toolStateColorHover",color:this.hoverColor})}else this.hoverColor=void 0}}}get zoomLevel(){return n.b.getState().canvasState.zoomLevel}async drawColor(e,t,o,r,n){const s=new p.Rect(Math.ceil(r.x-100/18),Math.ceil(r.y-100/18),Math.ceil(r.x+100/18),Math.ceil(r.y+100/18)),a=await Object(u.canvasToImgUrl)(Object(u.scaleCanvas)(Object(u.cropCanvas)(this.curPageContext.pageCanvas,s),18,!1),!0),i=s.zoom(18),c=this.renderer.pagePointToRealPoint(r,n),l=c.x*this.zoomLevel,d=c.y*this.zoomLevel,h={circle:{radius:100,left:l+23,top:d+23}};this.inited?(this.renderer.updateDraw(this.colorBand,{radius:123,left:l+0,top:d+0,fillColor:`rgb(${e},${t},${o})`}),this.renderer.updateDraw(this.roundEdge,{radius:103,left:l+20,top:d+20,fillColor:"#d1d1d1"}),this.renderer.updateDraw(this.magImg,{img:{src:a,width:i.width,height:i.height},left:l+23,top:d+23,clip:h})):(this.colorBand=this.renderer.draw({radius:123,left:l+0,top:d+0,fillColor:`rgb(${e},${t},${o})`},this.colorGroup),this.roundEdge=this.renderer.draw({radius:103,left:l+20,top:d+20,fillColor:"#d1d1d1"},this.colorGroup),this.magImg=this.renderer.draw({img:{src:a,width:i.width,height:i.height},left:l+23,top:d+23,clip:h},this.colorGroup),this.inited=!0)}async bindRenderer(){const e=this.renderer;this.colorGroup=e.getDrawableGroup(),e.on("mousemove",this.onMouseMove),e.on("click",this.onMouseDown)}async unbindRenderer(){const e=this.renderer;e.off("click",this.onMouseDown),e.off("mousemove",this.onMouseMove),e.removeDrawableGroup(this.colorGroup),this.inited=!1}}function m(e){return f().find(t=>t instanceof e)}function f(){let e=[];return Object.keys(g).forEach(t=>{e=e.concat(g[t])}),e}o.d(t,"getToolInst",(function(){return m})),o.d(t,"tools",(function(){return g})),o.d(t,"setActiveTool",(function(){return y})),o.d(t,"toggleTool",(function(){return v})),o.d(t,"ColorTool",(function(){return b})),o.d(t,"HandTool",(function(){return s})),o.d(t,"InspectTool",(function(){return l})),o.d(t,"BaseTool",(function(){return r}));const g={inspect:[new l,new b],general:[new s],prototype:[]};async function y(e){const t=n.b.getState().toolState.curTool;t!==e&&(t&&await t.deactivate(),e&&await e.activate(),n.b.dispatch({type:"toolStateChooseTool",tool:e}))}async function v(e){e.activated?await e.deactivate():await e.activate()}Object(n.a)(e=>e.canvasState.renderer,e=>{if(f().forEach(t=>{t.setRenderer(e)}),e){y(g.inspect[0]);const e=m(s);e&&v(e)}})},128:function(e,t,o){"use strict";o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return s}));var r=o(23);function n(e,t="CompositeLayer"){if(0===e.length)return null;return{layers:e,name:t,rect:e.reduce((e,t)=>e.valid&&t.rect.valid?e.combine(t.rect):e.valid?e.clone():t.rect.clone(),e[0].rect.clone()),page:e[0].page,layerType:r.LayerType.composite,visible:!0,style:{}}}function s(e,t="CompositeLayer"){return 1===e.length?e[0]:0===e.length?null:n(e)}},197:function(e,t,o){"use strict";o.d(t,"a",(function(){return n})),o.d(t,"b",(function(){return s}));var r=o(32);async function n(e,t,o=!0){let s=[];const{x:a,y:i}=e;for(let o=t.length-1;o>=0;o--){const c=t[o];if(c.visible&&(!c.rect.valid||c.rect.containsCoords(a,i)))if(Object(r.b)(c)){if(c.childrenLength>0){const t=await n(e,await c.children(),!1);t.length>0&&(s=t.concat(s),s.push({layer:c,dist:c.rect.coordsToCenter({x:a,y:i})}))}}else c.rect.valid&&c.rect.containsCoords(a,i)&&s.push({layer:c,dist:c.rect.coordsToCenter({x:a,y:i})})}return s.sort((e,t)=>e.dist-t.dist),o&&(s=s.slice(0,7)),s}async function s(e,t){if(e===t)return!0;let o=t.parent;for(;o;){if(o===e)return!0;o=o.parent}return!1}},32:function(e,t,o){"use strict";function r(e){return void 0!==e.getPixelImg}function n(e){return void 0!==e.getSvgString}function s(e){return void 0!==e.getText}function a(e){return void 0!==e.children}function i(e){return void 0!==e.layers}function c(e){return a(e)&&n(e)}o.d(t,"d",(function(){return r})),o.d(t,"f",(function(){return n})),o.d(t,"e",(function(){return s})),o.d(t,"b",(function(){return a})),o.d(t,"a",(function(){return i})),o.d(t,"c",(function(){return c}))},458:function(e,t,o){var r=o(459);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(11)(r,n);r.locals&&(e.exports=r.locals)},459:function(e,t,o){(e.exports=o(10)(!1)).push([e.i,".inspectStudio {\n  flex-grow: 1;\n  flex-shrink: 1;\n  position: relative;\n  display: flex; }\n  .inspectStudio > .mainContainer {\n    display: flex;\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0; }\n    .inspectStudio > .mainContainer .flexColumn {\n      flex-direction: column; }\n    .inspectStudio > .mainContainer .flexItem {\n      flex: 1; }\n    .inspectStudio > .mainContainer .main {\n      order: 2;\n      border-left: 1px solid #404a4b;\n      border-right: 1px solid #404a4b;\n      display: flex; }\n      .inspectStudio > .mainContainer .main .canvasWrapper {\n        flex: 1 1 auto;\n        position: relative; }\n    .inspectStudio > .mainContainer .sidebarLeft {\n      order: 1; }\n    .inspectStudio > .mainContainer .sidebarRight {\n      order: 3; }\n  .inspectStudio > .fileLoaderWrapper .formatsWrapper {\n    padding: 20px;\n    border-radius: 10px;\n    background: #282f2f;\n    position: absolute;\n    top: 20px;\n    right: 20px;\n    z-index: 5; }\n  .inspectStudio > .fileLoaderWrapper .fileDropper {\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0; }\n  .inspectStudio > .loading {\n    margin-left: auto;\n    margin-right: auto;\n    align-self: center;\n    display: flex;\n    align-items: center; }\n    .inspectStudio > .loading > i {\n      margin-right: 10px;\n      color: #2ecc71; }\n",""])},460:function(e,t,o){var r=o(461);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(11)(r,n);r.locals&&(e.exports=r.locals)},461:function(e,t,o){(e.exports=o(10)(!1)).push([e.i,".canvas {\n  position: absolute;\n  left: 0;\n  right: 0;\n  top: 0;\n  bottom: 0;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none; }\n  .canvas .tools {\n    position: absolute;\n    bottom: 20px;\n    right: 20px;\n    background: rgba(0, 0, 0, 0.6);\n    z-index: 10;\n    display: flex;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    align-items: stretch;\n    border-radius: 8px; }\n    .canvas .tools > * {\n      padding: 4px;\n      padding-top: 3px;\n      padding-bottom: 3px; }\n    .canvas .tools .text {\n      font-size: 0.8em;\n      font-weight: bold;\n      margin-right: 5px; }\n    .canvas .tools .zoomTool {\n      display: flex;\n      align-items: center; }\n      .canvas .tools .zoomTool .zoom {\n        margin-left: 8px;\n        margin-right: 8px;\n        cursor: pointer;\n        font-size: 1.2em; }\n    .canvas .tools .metricScale {\n      background: rgba(255, 255, 255, 0.05);\n      cursor: pointer; }\n      .canvas .tools .metricScale .metrics {\n        padding-left: 3px; }\n      .canvas .tools .metricScale .selectable:hover {\n        background: #104ecb; }\n",""])},462:function(e,t,o){(function(o){var r,n,s;n=[],void 0===(s="function"==typeof(r=function(){"use strict";function t(e,t,o){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){a(r.response,t,o)},r.onerror=function(){console.error("could not download file")},r.send()}function r(e){var t=new XMLHttpRequest;return t.open("HEAD",e,!1),t.send(),200<=t.status&&299>=t.status}function n(e){try{e.dispatchEvent(new MouseEvent("click"))}catch(o){var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var s="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof o&&o.global===o?o:void 0,a=s.saveAs||("object"!=typeof window||window!==s?function(){}:"download"in HTMLAnchorElement.prototype?function(e,o,a){var i=s.URL||s.webkitURL,c=document.createElement("a");o=o||e.name||"download",c.download=o,c.rel="noopener","string"==typeof e?(c.href=e,c.origin===location.origin?n(c):r(c.href)?t(e,o,a):n(c,c.target="_blank")):(c.href=i.createObjectURL(e),setTimeout((function(){i.revokeObjectURL(c.href)}),4e4),setTimeout((function(){n(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(e,o,s){if(o=o||e.name||"download","string"!=typeof e)navigator.msSaveOrOpenBlob(function(e,t){return void 0===t?t={autoBom:!1}:"object"!=typeof t&&(console.warn("Deprecated: Expected third argument to be a object"),t={autoBom:!t}),t.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob(["\ufeff",e],{type:e.type}):e}(e,s),o);else if(r(e))t(e,o,s);else{var a=document.createElement("a");a.href=e,a.target="_blank",setTimeout((function(){n(a)}))}}:function(e,o,r,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return t(e,o,r);var a="application/octet-stream"===e.type,i=/constructor/i.test(s.HTMLElement)||s.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||a&&i)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=c?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},l.readAsDataURL(e)}else{var d=s.URL||s.webkitURL,p=d.createObjectURL(e);n?n.location=p:location.href=p,n=null,setTimeout((function(){d.revokeObjectURL(p)}),4e4)}});s.saveAs=a.saveAs=a,e.exports=a})?r.apply(t,n):r)||(e.exports=s)}).call(this,o(20))},463:function(e,t,o){"use strict";var r=r||{};r.toast=function(){const e={SHOW:{"-webkit-transition":"opacity 400ms, -webkit-transform 400ms",transition:"opacity 400ms, transform 400ms",opacity:"1","-webkit-transform":"translateY(-100%) translateZ(0)",transform:"translateY(-100%) translateZ(0)"},HIDE:{opacity:"0","-webkit-transform":"translateY(150%) translateZ(0)",transform:"translateY(150%) translateZ(0)"}};function t(o,n,s){if(null!==r())t.prototype.toastQueue.push({text:o,options:n,transitions:s});else{t.prototype.Transitions=s||e;var a=n||{};a=t.prototype.mergeOptions(t.prototype.DEFAULT_SETTINGS,a),t.prototype.show(o,a),a=null}}var o=null;function r(){return o}function n(e){o=e}return t.prototype.DEFAULT_SETTINGS={style:{main:{background:"rgba(0, 0, 0, .85)","box-shadow":"0 0 10px rgba(0, 0, 0, .8)","border-radius":"3px","z-index":"99999",color:"rgba(255, 255, 255, .9)",padding:"10px 15px","max-width":"60%",width:"100%","word-break":"keep-all",margin:"0 auto","text-align":"center",position:"fixed",left:"0",right:"0",bottom:"0","-webkit-transform":"translateY(150%) translateZ(0)",transform:"translateY(150%) translateZ(0)","-webkit-filter":"blur(0)",opacity:"0"}},settings:{duration:1500}},t.prototype.Transitions={},t.prototype.toastQueue=[],t.prototype.timeout=null,t.prototype.mergeOptions=function(e,o){var r=o;for(var n in e)r.hasOwnProperty(n)?null!==e[n]&&e[n].constructor===Object&&(r[n]=t.prototype.mergeOptions(e[n],r[n])):r[n]=e[n];return r},t.prototype.generate=function(e,o){var s=document.createElement("div");"string"==typeof e&&(e=document.createTextNode(e)),s.appendChild(e),n(s),s=null,t.prototype.stylize(r(),o)},t.prototype.stylize=function(e,t){Object.keys(t).forEach((function(o){e.style[o]=t[o]}))},t.prototype.show=function(e,o){this.generate(e,o.style.main);var n=r();document.body.insertBefore(n,document.body.firstChild),n.offsetHeight,t.prototype.stylize(n,t.prototype.Transitions.SHOW),n=null,clearTimeout(t.prototype.timeout),t.prototype.timeout=setTimeout(t.prototype.hide,o.settings.duration)},t.prototype.hide=function(){var e=r();t.prototype.stylize(e,t.prototype.Transitions.HIDE),clearTimeout(t.prototype.timeout),e.addEventListener("transitionend",t.prototype.animationListener),e=null},t.prototype.animationListener=function(){r().removeEventListener("transitionend",t.prototype.animationListener),t.prototype.destroy.call(this)},t.prototype.destroy=function(){var e=r();if(document.body.removeChild(e),e=null,n(null),t.prototype.toastQueue.length>0){var o=t.prototype.toastQueue.shift();t(o.text,o.options,o.transitions),o=null}},{Toast:t}}(),e.exports=r.toast},464:function(e,t,o){var r=o(465);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(11)(r,n);r.locals&&(e.exports=r.locals)},465:function(e,t,o){(e.exports=o(10)(!1)).push([e.i,".sidebarRight {\n  overflow-y: auto;\n  overflow-x: hidden;\n  width: 300px; }\n  .sidebarRight .card {\n    border-radius: 0; }\n    .sidebarRight .card .title {\n      font-size: 1em;\n      font-weight: bold;\n      padding: 3px;\n      padding-top: 5px;\n      padding-bottom: 5px;\n      margin: 0; }\n",""])},466:function(e,t,o){var r=o(467);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(11)(r,n);r.locals&&(e.exports=r.locals)},467:function(e,t,o){(e.exports=o(10)(!1)).push([e.i,"",""])},468:function(e,t,o){var r=o(469);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(11)(r,n);r.locals&&(e.exports=r.locals)},469:function(e,t,o){(e.exports=o(10)(!1)).push([e.i,".layerBasicView .title {\n  display: flex; }\n  .layerBasicView .title .showCss {\n    padding-right: 8px;\n    font-size: 0.8em;\n    font-weight: bold;\n    cursor: pointer;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none; }\n\n.layerBasicView .cardBody {\n  padding-top: 10px;\n  padding-bottom: 10px;\n  font-size: 0.8em; }\n  .layerBasicView .cardBody table {\n    width: 100%; }\n    .layerBasicView .cardBody table tr td {\n      border-bottom: 1px solid #aaa;\n      padding-top: 5px;\n      padding-bottom: 5px; }\n    .layerBasicView .cardBody table tr td:first-child {\n      padding-right: 1em;\n      font-weight: bold;\n      text-align: right;\n      width: 50px;\n      padding-left: 1em; }\n    .layerBasicView .cardBody table tr td:last-child {\n      padding-left: 1em;\n      font-size: 1.2em;\n      color: white;\n      cursor: pointer; }\n",""])},470:function(e,t,o){var r=o(471);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(11)(r,n);r.locals&&(e.exports=r.locals)},471:function(e,t,o){(e.exports=o(10)(!1)).push([e.i,".clickCopyDiv {\n  position: relative; }\n  .clickCopyDiv:hover .label {\n    background: #2064EE;\n    color: white; }\n  .clickCopyDiv .copied {\n    position: absolute;\n    padding: 3px;\n    background: black;\n    border: 1px solid #999;\n    left: 30px;\n    top: -10px;\n    color: #fff; }\n",""])},472:function(e,t,o){var r=o(473);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(11)(r,n);r.locals&&(e.exports=r.locals)},473:function(e,t,o){(e.exports=o(10)(!1)).push([e.i,".layerExportView .cardBody .formats {\n  display: flex;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none; }\n  .layerExportView .cardBody .formats > span {\n    flex: 1 1 0;\n    padding-top: 10px;\n    padding-bottom: 10px;\n    text-align: center; }\n    .layerExportView .cardBody .formats > span.active {\n      background: #2064EE; }\n\n.layerExportView .cardBody .imgParam .preview {\n  position: relative;\n  height: 200px; }\n  .layerExportView .cardBody .imgParam .preview .mask {\n    position: absolute;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    top: 0;\n    z-index: 1;\n    background: rgba(0, 0, 0, 0.8);\n    opacity: 0;\n    transition: opacity ease 500ms; }\n  .layerExportView .cardBody .imgParam .preview:hover .mask {\n    opacity: 1; }\n  .layerExportView .cardBody .imgParam .preview > img {\n    max-width: 90%;\n    max-height: 90%;\n    position: absolute;\n    left: 50%;\n    top: 50%;\n    -webkit-transform: translate(-50%, -50%);\n            transform: translate(-50%, -50%);\n    z-index: 10; }\n  .layerExportView .cardBody .imgParam .preview .size {\n    z-index: 15;\n    position: absolute;\n    right: 0;\n    top: 0;\n    padding: 3px;\n    padding-left: 10px;\n    padding-right: 10px;\n    font-size: 1em;\n    color: white;\n    background: rgba(0, 0, 0, 0.5); }\n\n.layerExportView .cardBody .imgParam .options {\n  display: flex;\n  flex-wrap: wrap; }\n  .layerExportView .cardBody .imgParam .options > * {\n    width: 50%;\n    border-bottom: 1px solid #8c9b9d; }\n  .layerExportView .cardBody .imgParam .options > *:nth-child(even) {\n    border-left: 1px solid #8c9b9d; }\n  .layerExportView .cardBody .imgParam .options .dropdown-content {\n    background: black; }\n\n.layerExportView .cardBody .row {\n  display: flex;\n  align-items: center; }\n  .layerExportView .cardBody .row > div {\n    padding: 8px;\n    flex: 1 0 auto; }\n\n.layerExportView .cardBody .fileExport {\n  padding: 10px; }\n  .layerExportView .cardBody .fileExport .fileName {\n    font-weight: bold;\n    font-size: 0.85em;\n    color: #d9d9d9; }\n  .layerExportView .cardBody .fileExport .exporters {\n    display: flex;\n    justify-content: space-around;\n    margin-top: 10px;\n    margin-bottom: 10px; }\n    .layerExportView .cardBody .fileExport .exporters > button > i {\n      margin-right: 5px; }\n",""])},474:function(e,t,o){var r=o(475);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(11)(r,n);r.locals&&(e.exports=r.locals)},475:function(e,t,o){(e.exports=o(10)(!1)).push([e.i,".squareButton {\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  padding-top: 15px;\n  padding-bottom: 15px;\n  background: #282f2f;\n  color: white;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  width: 100%;\n  cursor: pointer; }\n  .squareButton .head {\n    position: absolute;\n    top: 5px;\n    left: 5px;\n    font-size: 0.8em;\n    font-weight: bold; }\n  .squareButton .value {\n    font-size: 1em; }\n  .squareButton.active {\n    background: #2064EE;\n    color: white; }\n",""])},476:function(e,t,o){var r=o(477);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(11)(r,n);r.locals&&(e.exports=r.locals)},477:function(e,t,o){(e.exports=o(10)(!1)).push([e.i,".layerItemContainer {\n  display: flex;\n  border-bottom: 1px solid #666;\n  cursor: pointer; }\n  .layerItemContainer .layerItem {\n    padding: 8px;\n    color: #efefef;\n    display: flex;\n    align-items: center;\n    font-size: 0.9em;\n    -webkit-user-select: none;\n       -moz-user-select: none;\n        -ms-user-select: none;\n            user-select: none;\n    flex-shrink: 1;\n    flex-grow: 1;\n    overflow: hidden; }\n    .layerItemContainer .layerItem.active {\n      background-color: #0c3c9c; }\n    .layerItemContainer .layerItem:hover {\n      background-color: #4f85f2; }\n    .layerItemContainer .layerItem.invisible {\n      color: #444; }\n    .layerItemContainer .layerItem .icon {\n      margin-right: 5px;\n      height: 16px; }\n      .layerItemContainer .layerItem .icon .material-icons {\n        font-size: 16px; }\n    .layerItemContainer .layerItem .indent {\n      flex-shrink: 0; }\n    .layerItemContainer .layerItem .name {\n      flex-shrink: 1;\n      flex-grow: 1;\n      min-width: 0;\n      white-space: nowrap;\n      overflow: hidden;\n      text-overflow: ellipsis; }\n    .layerItemContainer .layerItem .hint {\n      flex-shrink: 0;\n      font-size: 0.8em;\n      color: #ebebeb; }\n",""])},478:function(e,t,o){var r=o(479);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(11)(r,n);r.locals&&(e.exports=r.locals)},479:function(e,t,o){(e.exports=o(10)(!1)).push([e.i,".nearByLayers .page-head {\n  padding: 8px;\n  padding-left: 18px;\n  background: #0c3c9c;\n  cursor: default;\n  text-align: center;\n  display: block; }\n",""])},480:function(e,t,o){var r=o(481);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(11)(r,n);r.locals&&(e.exports=r.locals)},481:function(e,t,o){(e.exports=o(10)(!1)).push([e.i,".colorPickedView .cardBody {\n  padding: 15px; }\n  .colorPickedView .cardBody .hoverColor {\n    display: flex;\n    align-items: center;\n    padding-bottom: 15px;\n    border-bottom: 1px solid #aaa; }\n    .colorPickedView .cardBody .hoverColor .preview {\n      padding: 25px;\n      margin-right: 20px;\n      border: 1px solid #aaa;\n      border-radius: 5px; }\n    .colorPickedView .cardBody .hoverColor .txt {\n      display: flex;\n      flex-direction: column; }\n      .colorPickedView .cardBody .hoverColor .txt > span {\n        font-size: 0.8em; }\n      .colorPickedView .cardBody .hoverColor .txt .hex {\n        font-weight: bold;\n        font-size: 1.2rem; }\n  .colorPickedView .cardBody .pickedColors {\n    margin-top: 15px;\n    display: flex;\n    flex-wrap: wrap; }\n    .colorPickedView .cardBody .pickedColors .pickedColor {\n      padding: 10px;\n      display: flex;\n      flex-direction: column;\n      align-items: center;\n      -webkit-user-select: none;\n         -moz-user-select: none;\n          -ms-user-select: none;\n              user-select: none;\n      cursor: pointer; }\n      .colorPickedView .cardBody .pickedColors .pickedColor:hover {\n        background: #404a4b; }\n      .colorPickedView .cardBody .pickedColors .pickedColor .preview {\n        padding: 15px;\n        margin-bottom: 8px;\n        border-radius: 5px; }\n      .colorPickedView .cardBody .pickedColors .pickedColor > span {\n        font-size: 0.85rem; }\n",""])},482:function(e,t,o){var r=o(483);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(11)(r,n);r.locals&&(e.exports=r.locals)},483:function(e,t,o){(e.exports=o(10)(!1)).push([e.i,".toolbar {\n  display: flex;\n  flex-direction: column;\n  background: #404a4b; }\n",""])},484:function(e,t,o){var r=o(485);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(11)(r,n);r.locals&&(e.exports=r.locals)},485:function(e,t,o){(e.exports=o(10)(!1)).push([e.i,".toolBtn {\n  padding-top: 1rem;\n  padding-bottom: 1rem;\n  padding-left: 1rem;\n  padding-right: 1rem;\n  font-size: 1.5rem;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  cursor: pointer;\n  color: #8c9b9d; }\n  .toolBtn:hover {\n    color: white; }\n  .toolBtn.active {\n    color: #2ecc71;\n    background: #2d3435; }\n  .toolBtn.toggle.toolLayers.active {\n    background: #282f2f; }\n",""])},486:function(e,t,o){var r=o(487);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(11)(r,n);r.locals&&(e.exports=r.locals)},487:function(e,t,o){(e.exports=o(10)(!1)).push([e.i,".sidebarLeft {\n  display: flex; }\n",""])},488:function(e,t,o){var r=o(489);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(11)(r,n);r.locals&&(e.exports=r.locals)},489:function(e,t,o){(e.exports=o(10)(!1)).push([e.i,".pageList {\n  width: 300px;\n  background: #282f2f;\n  border-right: 1px solid white;\n  -webkit-user-select: none;\n     -moz-user-select: none;\n      -ms-user-select: none;\n          user-select: none;\n  overflow-y: auto; }\n  .pageList .page-head {\n    background: #1d2122;\n    font-size: 1.1em;\n    font-weight: bold;\n    border-bottom: 1px solid #404a4b;\n    display: flex;\n    align-items: center;\n    cursor: pointer; }\n    .pageList .page-head > .name {\n      padding: 8px;\n      padding-left: 15px;\n      flex-grow: 1;\n      flex-shrink: 1;\n      overflow: hidden;\n      text-overflow: ellipsis; }\n      .pageList .page-head > .name:hover {\n        background-color: #4f85f2; }\n    .pageList .page-head > .hint {\n      flex-shrink: 0;\n      font-size: 0.7em; }\n    .pageList .page-head.active {\n      background-color: #092d76; }\n  .pageList .layerListWrapper {\n    display: flex;\n    flex-direction: column;\n    width: 100%;\n    height: 100%; }\n    .pageList .layerListWrapper .back {\n      flex-shrink: 0;\n      background: #4c5759;\n      display: flex;\n      align-items: center; }\n      .pageList .layerListWrapper .back .backBtn {\n        padding: 15px;\n        cursor: pointer;\n        -webkit-user-select: none;\n           -moz-user-select: none;\n            -ms-user-select: none;\n                user-select: none; }\n        .pageList .layerListWrapper .back .backBtn:hover {\n          background: #576567; }\n    .pageList .layerListWrapper .layerList {\n      flex: 1 1 auto; }\n  .pageList .pageLayerInfo {\n    padding: 8px;\n    font-size: 0.8em;\n    text-align: center; }\n  .pageList .itemBtn {\n    align-self: stretch;\n    width: 40px;\n    flex-shrink: 0;\n    flex-grow: 0;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n    background-color: #2f3738;\n    border-left: 1px solid #343c3d;\n    border-right: 1px solid #1d2122; }\n    .pageList .itemBtn:hover {\n      color: #2ecc71; }\n",""])},490:function(e,t,o){var r=o(491);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};o(11)(r,n);r.locals&&(e.exports=r.locals)},491:function(e,t,o){(e.exports=o(10)(!1)).push([e.i,".layerList {\n  overflow-y: auto; }\n",""])},51:function(e,t,o){"use strict";o.r(t);var r=o(93),n=o(22),s=o(27);async function a(e){const t=n.b.getState().sessionState.adapters,o={meta:{name:e.name,mime:e.type},file:e};for(const e of t)if(e.checkFileMeta(o.meta))try{Object(s.a)("filetype_"+e.fileTypeName);const t=await e.decodeProject(o);return await t.getPages(),n.b.dispatch({type:"openProject",project:t}),t}catch(e){return Object(s.a)("fileparse_err_"+e.toString()),Promise.reject(e)}return Object(s.a)("no_mime_"+o.meta.name),Promise.reject(Object(r.lang)("error_openfile_no_adapter",o.meta.name))}var i=o(23);const c=[.1,.25,.33,.5,.75,1,1.5,2,3,4],l=[1,2,3,4];function d(){const e=f();var t;h((t=e,c.find(e=>e>t)||c[c.length-1]))}function p(e){const t=n.b.getState().canvasState.renderer;if(t){const o={x:t.renderWidth/2,y:t.renderHeight/2},r={x:e.x*f()-o.x,y:e.y*f()-o.y};t.panX(r.x),t.panY(r.y)}}function u(e){Object(s.a)("center_to_page");const t=e.offsetX?e.offsetX:0,o=e.offsetY?e.offsetY:0;p(new i.Rect(t,o,e.width+t,e.height+o).centerPoint)}function h(e){const t=n.b.getState().canvasState.renderer;if(t){const o=t.rendererPointToRealPoint({x:t.renderWidth/2,y:t.renderHeight/2});n.b.dispatch({value:e,type:"canvasStateZoomLevel"}),p(o)}}function b(e){n.b.dispatch({type:"canvasStateMetricScale",value:e})}function m(){h(y(f()))}function f(){return n.b.getState().canvasState.zoomLevel}function g(){const e=n.b.getState().canvasState.renderer,t=Math.round(1/Math.max(e.imgWidth/e.renderWidth,e.imgHeight/e.renderHeight,1)*100)/100,o=-1!==c.indexOf(t)?t:y(t);p({x:e.imgWidth/2,y:e.imgHeight/2}),h(o)}function y(e){return c.concat().reverse().find(t=>t<e)||c[0]}let v;async function x(e){const{SvgRenderer:t}=await Promise.all([o.e(1),o.e(29)]).then(o.bind(null,899));v&&(v.destroy(),v.off("mousemove",O)),v=new t(e),function(e){e.on("mousemove",O)}(v),n.b.dispatch({type:"canvasStateRenderer",renderer:v});const r=await n.b.getState().sessionState.project.getPages();return await v.renderPages(r),g(),v}let w=null;function O(e){if(e){const t=v.realPointApplyMetricScale(v.rendererPointToRealPoint(v.mouseEventToCoords(e)));n.b.dispatch({type:"canvasStateMouseCoords",coords:t})}}window.addEventListener("resize",()=>{w&&(clearTimeout(w),w=null),v&&(w=window.setTimeout(()=>{w=null,v&&v.resizeRender()},100))});var j=o(462),L=o.n(j);const C=[new class{constructor(){this.name=Object(r.lang)("download"),this.iconCls="fas fa-download"}exportBlob(e,t){return L.a.saveAs(e,t),Promise.resolve()}}];var S=o(25);const k=o(463).Toast;const P=new class{info(e){k(e,{style:{main:{bottom:"auto",top:"10%",left:"auto",width:"auto",right:"8%",background:"rgba(255,255,255,0.85",color:"black"}},settings:{duration:800}})}};function T(e){const t=S.color.rgbStrToHex(e).toUpperCase();Object(S.copyToClipboard)(t),P.info("Copied "+t)}o.d(t,"projectOpenLocalFile",(function(){return a})),o.d(t,"initRendererOnCanvas",(function(){return x})),o.d(t,"metricScales",(function(){return l})),o.d(t,"zoomIn",(function(){return d})),o.d(t,"centerTo",(function(){return p})),o.d(t,"centerToPage",(function(){return u})),o.d(t,"setZoom",(function(){return h})),o.d(t,"setMetricScale",(function(){return b})),o.d(t,"zoomOut",(function(){return m})),o.d(t,"getZoom",(function(){return f})),o.d(t,"fitToPage",(function(){return g})),o.d(t,"exporters",(function(){return C})),o.d(t,"copyColor",(function(){return T}))},71:function(e,t,o){"use strict";o.r(t),o.d(t,"lang",(function(){return c}));var r=o(51);o.d(t,"facade",(function(){return r}));var n=o(102);o.d(t,"tools",(function(){return n}));var s=o(93);o.d(t,"i18n",(function(){return s}));var a=o(23);o.d(t,"Core",(function(){return a}));var i=o(25);o.d(t,"util",(function(){return i}));const c=s.lang},897:function(e,t,o){"use strict";o.r(t);var r=o(0),n=(o(458),o(460),o(71)),s=o(28),a=o(51);class i extends r.a{constructor(){super(),Object(s.a)(this,{coords:e=>e.canvasState.mouseCoords,zoomLevel:e=>e.canvasState.zoomLevel,curTool:e=>e.toolState.curTool,renderer:e=>e.canvasState.renderer,metricScale:e=>e.canvasState.metricScale})}componentDidMount(){n.facade.initRendererOnCanvas(this.canvasWrapper)}componentWillUnmount(){}zoomIn(){n.facade.zoomIn()}zoomOut(){n.facade.zoomOut()}otherScale(){const e=window.prompt("Please enter a scale number",""+this.state.metricScale);if(e){const t=parseFloat(e);!isNaN(t)&&t>0&&n.facade.setMetricScale(t)}}render(){return Object(r.b)("div",{ref:e=>this.canvasWrapper=e,class:`canvas ${this.state.curTool?this.state.curTool.slug:""}`},this.state.renderer?Object(r.b)("div",{class:"tools"},Object(r.b)("div",null,this.state.coords?Object(r.b)("span",{class:"text"},"X: ",this.state.coords.x):null,this.state.coords?Object(r.b)("span",{class:"text"},"Y: ",this.state.coords.y):null),Object(r.b)("div",{class:"metricScale dropdown is-hoverable is-up"},Object(r.b)("div",{class:"dropdown-trigger"},Object(r.b)("i",{class:"fas fa-ruler-combined"}),Object(r.b)("span",{class:"metrics"},"@",this.state.metricScale,"X")),Object(r.b)("div",{class:"dropdown-menu",id:"dropdown-menu7",role:"menu"},Object(r.b)("div",{class:"dropdown-content"},Object(r.b)("div",{class:"dropdown-item "},Object(r.b)("p",null,"Pick a metric scale that the design file has been created at. It will affect canvas measurements only.")),Object(r.b)("hr",{class:"dropdown-divider"}),a.metricScales.map(e=>Object(r.b)("div",{onClick:()=>{n.facade.setMetricScale(e)},class:"dropdown-item selectable"},Object(r.b)("p",null,"@",e,"X"))),Object(r.b)("hr",{class:"dropdown-divider"}),Object(r.b)("div",{onClick:()=>{this.otherScale()},class:"dropdown-item selectable"},Object(r.b)("p",null,"Other"))))),Object(r.b)("div",{class:"zoomTool"},Object(r.b)("span",{class:"zoom",onClick:()=>this.zoomOut()},Object(r.b)("i",{class:"fas fa-search-minus"})),Object(r.b)("span",{class:"text"},100*(this.state.zoomLevel||1),"%"),Object(r.b)("span",{class:"zoom",onClick:()=>this.zoomIn()},Object(r.b)("i",{class:"fas fa-search-plus"})))):null)}}o(464),o(466),o(468),o(470);class c extends r.a{constructor(e){super(e),this.state={value:"string"==typeof e.value?e.value:"",copied:!1},e.value instanceof Promise&&e.value.then(e=>{this.setState({value:e})})}get label(){if(this.props.children){if(this.props.children instanceof Array&&this.props.children.length>0)return this.props.children;if(!(this.props.children instanceof Array))return this.props.children}return this.state.value}componentWillReceiveProps(e){e.value instanceof Promise?e.value.then(e=>{this.setState({value:e})}):this.setState({value:e.value})}copy(){n.util.copyToClipboard(this.state.value),this.setState({copied:!0}),setTimeout(()=>{this.setState({copied:!1})},1e3)}render(){return Object(r.b)("div",{onClick:()=>this.copy(),class:"clickCopyDiv"},Object(r.b)("span",{class:"label"},this.label),this.state.copied?Object(r.b)("div",{class:"copied animated fadeOutUp"},n.i18n.lang("copied")+"!"):null)}}var l=o(32);class d extends class{toCode(e){const t=e.style;return t?Object.keys(t).map(o=>{const r=t[o];return this.styleToCode(o,r,e)}).filter(e=>e.length>0).join("\n"):""}}{styleToCode(e,t,o){return["left","top","right","bottom"].indexOf(e)>-1?`${e}: ${t}px;`:"opacity"===e?`opacity:${t}`:Object(l.e)(o)?"fontFamily"===e?`font-family:${t}`:"fontSize"===e?`font-size:${t}px`:"fontWeight"===e?`font-weight:${t}`:"fontStyle"===e?`font-style:${t}`:"textDecoration"===e?`text-decoration:${t}`:"textAlign"===e?`align:${t}`:"fill"===e?`color:${t}`:"":"fill"===e?`background-color:${t}`:""}}d.codeType="CSS";class p extends r.a{constructor(){super(),this.state={showCss:!1}}renderTable(){const e=this.props.layer;return Object(r.b)("table",null,Object(r.b)("tr",null,Object(r.b)("td",null,"Name"),Object(r.b)("td",null,Object(r.b)(c,{value:e.name}))),Object(r.b)("tr",null,Object(r.b)("td",null,"Type"),Object(r.b)("td",null,Object(r.b)(c,{value:e.layerType}))),Object(r.b)("tr",null,Object(r.b)("td",null,"Left"),Object(r.b)("td",null,Object(r.b)(c,{value:e.rect.left.toString()}))),Object(r.b)("tr",null,Object(r.b)("td",null,"Top"),Object(r.b)("td",null,Object(r.b)(c,{value:e.rect.top.toString()}))),Object(r.b)("tr",null,Object(r.b)("td",null,"Width"),Object(r.b)("td",null,Object(r.b)(c,{value:e.rect.width.toString()}))),Object(r.b)("tr",null,Object(r.b)("td",null,"Height"),Object(r.b)("td",null,Object(r.b)(c,{value:e.rect.height.toString()}))),this.renderTextProps(),e.style?Object.keys(e.style).filter(t=>void 0!==e.style[t]).map(t=>Object(r.b)("tr",null,Object(r.b)("td",null,t),Object(r.b)("td",null,Object(r.b)(c,{value:e.style[t].toString()})))):null)}renderStyles(){}renderTextProps(){const e=this.props.layer;return Object(l.e)(e)?Object(r.b)("tr",null,Object(r.b)("td",null,"Text"),Object(r.b)("td",null,Object(r.b)(c,{value:e.getText()}))):null}renderCss(){const e=this.props.layer,t=(new d).toCode(e);return Object(r.b)("pre",null,t)}render(){return Object(r.b)("div",{class:"card layerBasicView"},Object(r.b)("div",{class:"title has-background-grey-dark has-text-white-ter"},"LAYER INFO",Object(r.b)("span",{class:"flex1"}),Object(r.b)("span",{onClick:()=>{this.setState({showCss:!this.state.showCss})},class:`showCss ${this.state.showCss?"has-text-info":""}`},"CSS")," "),Object(r.b)("div",{class:"cardBody"},this.state.showCss?this.renderCss():this.renderTable()))}}o(472),o(474);class u extends r.a{render(){return Object(r.b)("div",{onClick:this.props.onClick,class:`squareButton ${this.props.active?"active":""}`},Object(r.b)("div",{class:"head"},this.props.head),Object(r.b)("span",{class:"value"},this.props.value))}}var h=o(25);async function b(e,t){const{layerToSvg:r}=await Promise.all([o.e(1),o.e(8)]).then(o.bind(null,896));if(Object(l.d)(e))return Object(h.scaleCanvas)(await e.getPixelImg(),t);{const o=await r(e);return Object(h.svgToCanvas)(o.svg(),t)}}var m=o(27);function f(e){const t=h.CanvasExportFormats.concat([]);return t.push("image/svg"),t}function g(e,t){return t&&"image/svg"!==t.format?`${e.name}@${t.scale}X.${t.format.replace("image/","")}`:`${e.name}.svg`}async function y(e,t,r){const{optimizeJpg:n,optimizePng:s}=await o.e(9).then(o.bind(null,895));if(Object(m.a)("export_trim_"+r.trim),Object(m.a)("export_scale_"+r.scale),Object(m.a)("export_optimize_"+r.optimize),Object(m.a)("export_format_"+r.format),"image/svg"===r.format)return async function(e,t,r){const{optimizeSvg:n}=await o.e(9).then(o.bind(null,895)),{layerToSvg:s}=await Promise.all([o.e(1),o.e(8)]).then(o.bind(null,896));let a=(await s(e)).svg();r&&(a=await n(a));return t.exportBlob(new Blob([a],{type:"image/svg+xml"}),g(e))}(e,t,r.optimize);{let o=await b(e,r.scale);r.trim&&(o=Object(h.trimCanvas)(o));let a=null;const i=g(e,r);if(r.optimize&&"image/png"===r.format){const e=o.getContext("2d");a=await s(e.getImageData(0,0,o.width,o.height).data,o.width,o.height)}return a||(a=await Object(h.canvasToFile)(o,i,r.format,100),r.optimize&&"image/jpeg"===r.format&&(a=await n(a))),t.exportBlob(a,i)}}var v=o(158);class x extends r.a{constructor(e){super(e),this.previewUrl="",this.imgEle=void 0,this.state={exportImgParams:{trim:!0,scale:1,format:f(this.props.layer)[0],optimize:!0}}}get imgParamsFormat(){return this.state.exportImgParams.format}set imgParamsFormat(e){this.state.exportImgParams.format!==e&&this.setState({exportImgParams:{...this.state.exportImgParams,format:e}})}get exportFileName(){return g(this.props.layer,this.state.exportImgParams)}componentDidMount(){this.updatePreview()}async updatePreview(){const e=await async function(e,t){let o=await b(e,t.scale);return t.trim&&(o=Object(h.trimCanvas)(o)),o.toDataURL(t.format,100)}(this.props.layer,this.state.exportImgParams);e!==this.previewUrl&&(this.previewUrl=e,this.forceUpdate())}componentDidUpdate(e,t){this.state.exportImgParams===t.exportImgParams&&this.props.layer===e.layer||this.updatePreview()}componentWillReceiveProps(e){this.props.layer,e.layer}render(){return Object(r.b)("div",{class:"card layerExportView"},Object(r.b)("div",{class:"title has-background-grey-dark has-text-white-ter"},"EXPORT"),Object(r.b)("div",{class:"cardBody"},this.renderImageParam(),this.renderFileExporters()))}async exportFile(e){await y(this.props.layer,e,this.state.exportImgParams)}renderFileExporters(){return Object(r.b)("div",{class:"fileExport"},Object(r.b)("div",{class:"fileName"},"Name: ",this.exportFileName),Object(r.b)("div",{class:"exporters"},a.exporters.map(e=>Object(r.b)(v.a,{onClick:()=>this.exportFile(e),class:"button is-primary is-small"},Object(r.b)("i",{class:e.iconCls}),e.name))))}toogleTrim(){this.setState({exportImgParams:{...this.state.exportImgParams,trim:!this.state.exportImgParams.trim}})}setImgScale(e){e!==this.state.exportImgParams.scale&&this.setState({exportImgParams:{...this.state.exportImgParams,scale:e}})}toggleOptimize(){this.setState({exportImgParams:{...this.state.exportImgParams,optimize:!this.state.exportImgParams.optimize}})}renderImageParam(){return Object(r.b)("div",{class:"imgParam"},Object(r.b)("div",{class:"preview",style:{backgroundImage:"url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABfGlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGAqSSwoyGFhYGDIzSspCnJ3UoiIjFJgv8PAzcDDIMRgxSCemFxc4BgQ4MOAE3y7xsAIoi/rgsxK8/x506a1fP4WNq+ZclYlOrj1gQF3SmpxMgMDIweQnZxSnJwLZOcA2TrJBUUlQPYMIFu3vKQAxD4BZIsUAR0IZN8BsdMh7A8gdhKYzcQCVhMS5AxkSwDZAkkQtgaInQ5hW4DYyRmJKUC2B8guiBvAgNPDRcHcwFLXkYC7SQa5OaUwO0ChxZOaFxoMcgcQyzB4MLgwKDCYMxgwWDLoMjiWpFaUgBQ65xdUFmWmZ5QoOAJDNlXBOT+3oLQktUhHwTMvWU9HwcjA0ACkDhRnEKM/B4FNZxQ7jxDLX8jAYKnMwMDcgxBLmsbAsH0PA4PEKYSYyjwGBn5rBoZt5woSixLhDmf8xkKIX5xmbARh8zgxMLDe+///sxoDA/skBoa/E////73o//+/i4H2A+PsQA4AJHdp4IxrEg8AAACDSURBVDgR3VJBEgARDGtx4gH+/y4P8AGu7Masm2zvejGTaDQN7b3Pt4RVrVXGGEfaOSchxngkAaKxtfYvQLs/AtOxCYE7S8DiLxAIbEHwjhQQFStwWkqZLGdVlZyz4DzV+gdWzikl8d6f+he2LDAbwNnrW5Eb3DeM8wKBYOZMItyreQC1XjqT76HMaAAAAABJRU5ErkJggg==)"}},Object(r.b)("div",{class:"mask"}),this.previewUrl?Object(r.b)("img",{ref:e=>this.imgEle=e,src:this.previewUrl}):null,this.previewUrl?Object(r.b)("div",{class:"size"},this.props.layer.rect.width*this.state.exportImgParams.scale,"x",this.props.layer.rect.height*this.state.exportImgParams.scale):null),Object(r.b)("div",{class:"options"},Object(r.b)(u,{onClick:()=>{this.toogleTrim()},head:"Trim",value:this.state.exportImgParams.trim?"ON":"OFF",active:this.state.exportImgParams.trim}),Object(r.b)(u,{onClick:()=>{this.toggleOptimize()},head:"Optimize",value:`${this.state.exportImgParams.optimize?"ON":"OFF"}`,active:this.state.exportImgParams.optimize}),Object(r.b)("div",{class:"dropdown is-hoverable"},Object(r.b)(u,{head:"Scale",value:`${this.state.exportImgParams.scale}X`}),Object(r.b)("div",{class:"dropdown-menu"},Object(r.b)("div",{class:"dropdown-content"},[.25,.5,.75,1,2,3,4].map(e=>Object(r.b)("a",{href:"javascript:;",onClick:()=>{this.setImgScale(e)},class:"dropdown-item"},e,"X")),Object(r.b)("hr",{class:"dropdown-divider"}),Object(r.b)("a",{onClick:()=>{const e=parseFloat(window.prompt("Please enter scale number: ",this.state.exportImgParams.scale.toString()));this.setImgScale(e)},href:"javascript:;",class:"dropdown-item"},"Other Scale")))),Object(r.b)("div",{class:"dropdown is-hoverable"},Object(r.b)(u,{head:"Format",value:`${this.imgParamsFormat.replace("image/","").toUpperCase()}`}),Object(r.b)("div",{class:"dropdown-menu"},Object(r.b)("div",{class:"dropdown-content"},f(this.props.layer).map(e=>Object(r.b)("a",{href:"javascript:;",onClick:()=>{this.imgParamsFormat=e},class:"dropdown-item"},e.replace("image/","").toUpperCase())))))))}}var w=o(128),O=(o(476),o(22)),j=o(197);class L extends r.a{constructor(e){super(e),this.state={active:!1};let t=void 0;Object(s.a)(this,{active:async o=>{if(e.showActive){if(t===o.toolState.choseLayers)return this.state.active;const r=e.layer;if(t=o.toolState.choseLayers,Object(l.b)(r)){for(const e of t){if(await Object(j.b)(r,e))return!0}return!1}return t.indexOf(r)>-1}return!1}})}componentWillReceiveProps(e){e.layer!==this.props.layer&&this.setState({children:void 0})}getIcon(e){switch(e.layerType){case n.Core.LayerType.text:return"fa-font";case n.Core.LayerType.folder:case n.Core.LayerType.folderVector:return"fa-folder";case n.Core.LayerType.pixel:return"fa-file-image";case n.Core.LayerType.vector:return"fa-vector-square"}}layerItemClick(e,t){t.metaKey||t.shiftKey||t.ctrlKey?(Object(m.a)("choose_layer_list_multi"),O.b.dispatch({type:"toolStateToggleChoseLayer",layers:[e]})):(Object(m.a)("choose_layer_list_single"),O.b.dispatch({type:"toolStateChoseLayer",layers:[e]}))}async toggleFolder(e){if(Object(m.a)("ui_toggle_folder"),Object(l.b)(e))if(this.state.children)this.setState({children:void 0});else{const t=await e.children();this.setState({children:t})}}renderChildren(){const e=this.props.indent?this.props.indent:0;return this.state.children.map(t=>Object(r.b)(L,{showActive:this.props.showActive,layer:t,indent:e+1}))}renderLayerItem(){const e=this.props.layer,t=this.props.indent?this.props.indent:0,o=this.state.active;return Object(r.b)("div",null,Object(r.b)("div",{class:"layerItemContainer"},Object(r.b)("div",{class:"layerItem "+(e.visible?"":"invisible")+(o?" active":""),onClick:t=>{this.layerItemClick(e,t)}},Object(r.b)("span",{class:"indent",style:{width:16*t}}),Object(r.b)("span",{class:"icon is-small"},Object(r.b)("i",{class:"fas "+this.getIcon(e),"aria-hidden":"true"})),Object(r.b)("span",{class:"name"},e.name)),Object(l.b)(e)?Object(r.b)("div",{onClick:()=>{this.toggleFolder(e)},class:"folderToggle itemBtn"},this.state.children?Object(r.b)("i",{class:"far fa-minus-square"}):Object(r.b)("i",{class:"far fa-plus-square"})):null),this.state.children?this.renderChildren():null)}render(){return this.renderLayerItem()}}o(478);class C extends r.a{constructor(){super(),Object(s.a)(this,{nearbyLayers:e=>e.toolState.neabyLayers})}render(){if(!this.state.nearbyLayers||0===this.state.nearbyLayers.length)return null;const e=this.state.nearbyLayers.slice(1);return Object(r.b)("div",{class:"nearByLayers"},Object(r.b)("div",{class:"pageList"},Object(r.b)("h3",{class:"page-head"},"Near by Layers"),Object(r.b)("div",{class:"layerList"},e.map(e=>Object(r.b)(L,{showActive:!1,layer:e})))))}}class S extends r.a{constructor(){super(),Object(s.a)(this,{layers:e=>e.toolState.choseLayers,display:e=>e.toolState.choseLayers.length>0})}get curLayer(){return Object(w.b)(this.state.layers)}render(){return this.state.display&&this.curLayer?Object(r.b)("div",null,Object(r.b)(C,null),Object(r.b)(x,{layer:this.curLayer}),Object(r.b)(p,{layer:this.curLayer})):null}}var k=o(102);o(480);class P extends r.a{constructor(){super(),Object(s.a)(this,{display:e=>!!e.toolState.curTool&&e.toolState.curTool instanceof k.ColorTool,colors:e=>e.toolState.pickedColors,hoverColor:e=>e.toolState.hoverColor})}copyColor(e){n.facade.copyColor(e)}render(){return this.state.display?Object(r.b)("div",{class:"card colorPickedView"},Object(r.b)("div",{class:"title"},"Colors"),Object(r.b)("div",{class:"cardBody"},Object(r.b)("div",{class:"hoverColor"},Object(r.b)("div",{class:"preview",style:`background-color:${this.state.hoverColor}`}),Object(r.b)("div",{class:"txt"},Object(r.b)("span",{class:"hex"},n.util.color.rgbStrToHex(this.state.hoverColor).toUpperCase()),Object(r.b)("span",null,"Click to Copy"))),Object(r.b)("div",{class:"pickedColors"},this.state.colors.map(e=>Object(r.b)("div",{onClick:()=>this.copyColor(e),class:"pickedColor"},Object(r.b)("div",{class:"preview",style:`background-color:${e}`}),Object(r.b)("span",null,n.util.color.rgbStrToHex(e).toUpperCase())))))):null}}class T extends r.a{get curToolState(){return O.b.getState().toolState.curTool}componentDidMount(){}componentWillUnmount(){}render(){return Object(r.b)("aside",{class:"sidebar sidebarRight"},Object(r.b)(P,null),Object(r.b)(S,null))}}o(482),o(484);class I extends r.a{onToolClick(e){return Object(m.a)(`tool_${this.props.tool.name}`),this.props.onClick(e)}render(){return Object(r.b)("div",{onClick:e=>this.onToolClick(e),class:`toolBtn toggle ${this.props.tool.activated?"active":""}`},this.props.tool.isClsSVG?Object(r.b)("img",{src:this.props.tool.cls}):Object(r.b)("i",{class:this.props.tool.cls}))}}class M extends r.a{constructor(){super(),Object(s.a)(this,{display:e=>!!e.canvasState.renderer,showListColumn:e=>e.viewState.showListColumn,curTool:e=>e.toolState.curTool}),this.unsubscribe=Object(O.a)(e=>e.toolState.choseLayers,()=>{this.setExclusiveTool(Object(k.getToolInst)(k.InspectTool))},!1)}componentWillUnmount(){this.unsubscribe()}render(){return this.state.display?Object(r.b)("div",{class:"toolbar"},this.renderPillarTool(),Object(r.b)("div",{class:"flex1"}),this.renderGeneralTools()):null}renderGeneralTools(){return n.tools.tools.general.map(e=>this.bindToggleTool(e)).concat([Object(r.b)("div",{onClick:()=>O.b.dispatch({type:"viewStateToggleListItem"}),class:`toolBtn toggle toolLayers ${this.state.showListColumn?"active":""}`},Object(r.b)("i",{class:"fas fa-th"}))])}renderPillarTool(){return n.tools.tools.inspect.map(e=>this.bindExclusiveTool(e))}async setExclusiveTool(e){await n.tools.setActiveTool(e),this.forceUpdate()}bindExclusiveTool(e){return e?Object(r.b)(I,{onClick:()=>this.setExclusiveTool(e),tool:e}):null}async toggleTool(e){await n.tools.toggleTool(e),this.forceUpdate()}bindToggleTool(e){if(e)return Object(r.b)(I,{onClick:()=>this.toggleTool(e),tool:e})}}o(486),o(488),o(490);class z extends r.a{constructor(){super()}get pageState(){return this.props.page}componentWillUnmount(){this.unsubscribe()}componentDidMount(){this.renderLayerItem(),this.unsubscribe=O.b.subscribe(()=>{this.pageState&&this.pageState!==this.currentPage&&this.renderLayerItem()})}async renderLayerItem(){this.currentPage=this.pageState;const e=await this.currentPage.getLayers();this.setState({layers:e})}render(){const{layers:e}=this.state;return Object(r.b)("div",{class:"layerList"},e&&e.map((e,t,o)=>Object(r.b)(L,{showActive:!0,layer:e})))}}class B extends r.a{constructor(){super(),Object(s.b)(this,{choseLayers:e=>e.toolState.choseLayers}),this.state={collapsedPages:[]}}async componentDidMount(){const e=O.b.getState().sessionState.project;if(e){const t=await e.getPages();this.setState({pages:t})}}async chosePage(e){Object(m.a)("choose_page"),O.b.dispatch({type:"toolStateChoseLayer",layers:[await e.toLayer()]})}togglePage(e){const t=this.state.collapsedPages.concat([]),o=t.indexOf(e);o>-1?t.splice(o,1):t.push(e),this.setState({collapsedPages:t})}renderPage(e){const t=!(!this.state.choseLayers||!this.state.choseLayers.find(t=>t.page===e));return Object(r.b)("div",{class:"pageWrapper"},Object(r.b)("div",{class:`page-head ${t?"active":""}`},Object(r.b)("div",{onClick:()=>this.chosePage(e),class:"name"},e.name),Object(r.b)("div",{onClick:()=>Object(a.centerToPage)(e),class:"itemBtn"},Object(r.b)("i",{class:"fas fa-crosshairs"})),Object(r.b)("div",{class:"itemBtn",onClick:()=>this.togglePage(e)},-1===this.state.collapsedPages.indexOf(e)?Object(r.b)("i",{class:"far fa-minus-square"}):Object(r.b)("i",{class:"far fa-plus-square"}))),-1===this.state.collapsedPages.indexOf(e)?Object(r.b)("div",{class:"layerListWrapper"},Object(r.b)(z,{page:e})):null,Object(r.b)("div",{class:"pageLayerInfo"},"(",e.layerAmount," Layers)"))}render(){return Object(r.b)("div",{class:"pageList"},this.state.pages?this.state.pages.map(e=>this.renderPage(e)):null)}}class D extends r.a{constructor(){super(),Object(s.a)(this,{display:e=>!!e.sessionState.project,showListColumn:e=>e.viewState.showListColumn})}render(){return this.state.display?Object(r.b)("aside",{class:"sidebar sidebarLeft"},Object(r.b)(M,null),this.state.showListColumn?Object(r.b)(B,null):null):null}}var A=o(155),E=o(318),R=o(157);o.d(t,"InspectStudio",(function(){return V}));class V extends r.a{constructor(){super(),this.onToggleView=e=>{},Object(s.b)(this,{project:e=>e.sessionState.project}),this.state={loading:!1}}renderMain(){return window.document.title=this.state.project.name,Object(r.b)("div",{class:"mainContainer flexColumn"},Object(r.b)(D,null),Object(r.b)("main",{class:"flexItem main"},Object(r.b)("div",{class:"canvasWrapper"},Object(r.b)(i,null))),Object(r.b)(T,null))}async onLoadFile(e){this.setState({loading:!0});const{facade:t}=await Promise.resolve().then(o.bind(null,71));t.projectOpenLocalFile(e).then(async()=>{},e=>{Object(E.b)(e)}).then(()=>{this.setState({loading:!1})})}renderLoader(){return Object(r.b)("div",{class:"fileLoaderWrapper"},Object(r.b)("div",{class:"formatsWrapper"},Object(r.b)(R.a,null)),Object(r.b)(A.a,{onFile:e=>{this.onLoadFile(e)}}))}renderLoading(){return Object(r.b)("div",{class:"loading is-size-4"},Object(r.b)("i",{class:"fas fa-spinner is-size-2  animated infinite spin"})," Parsing... Please be patient.")}render(){return Object(r.b)("div",{class:"inspectStudio"},this.state.project?this.renderMain():this.state.loading?this.renderLoading():this.renderLoader())}}},93:function(e,t,o){"use strict";o.r(t);var r=o(103);o.d(t,"lang",(function(){return r.c})),o.d(t,"setCurLang",(function(){return r.d})),o.d(t,"getLangs",(function(){return r.b})),o.d(t,"getCurLang",(function(){return r.a}))}}]);